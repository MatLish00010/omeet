"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define("scripts",e):e()}(function(){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t,r=e(function(e){var t,r;t=o,r=function(){function b(e,t,r){if(r){var o=document.createDocumentFragment(),n=!t.hasAttribute("viewBox")&&r.getAttribute("viewBox");n&&t.setAttribute("viewBox",n);for(var l=r.cloneNode(!0);l.childNodes.length;)o.appendChild(l.firstChild);e.appendChild(o)}}function v(o){o.onreadystatechange=function(){if(4===o.readyState){var r=o._cachedDocument;r||((r=o._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=o.responseText,o._cachedTarget={}),o._embeds.splice(0).map(function(e){var t=o._cachedTarget[e.id];t=t||(o._cachedTarget[e.id]=r.getElementById(e.id)),b(e.parent,e.svg,t)})}},o.onreadystatechange()}function m(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(e){var s,d=Object(e),t=window.top!==window.self;s="polyfill"in d?d.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&t;var f={},p=window.requestAnimationFrame||setTimeout,g=document.getElementsByTagName("use"),h=0;s&&function e(){for(var t=0;t<g.length;){var r=g[t],o=r.parentNode,n=m(o),l=r.getAttribute("xlink:href")||r.getAttribute("href");if(!l&&d.attributeName&&(l=r.getAttribute(d.attributeName)),n&&l){if(s)if(!d.validate||d.validate(l,n,r)){o.removeChild(r);var a=l.split("#"),i=a.shift(),c=a.join("#");if(i.length){var u=f[i];u||((u=f[i]=new XMLHttpRequest).open("GET",i),u.send(),u._embeds=[]),u._embeds.push({parent:o,svg:n,id:c}),v(u)}else b(o,n,document.getElementById(c))}else++t,++h}else++t}(!g.length||0<g.length-h)&&p(e,67)}()}},e.exports?e.exports=r():t.svg4everybody=r()}),n=e(function(e,t){var r;r=function(){return o={},n.m=r=[function(e,t,r){r.r(t);function o(e){return Array.isArray(e)?e:[e]}function c(e){return e instanceof Node}function n(e,t){if(e&&t){e=e instanceof NodeList?e:[e];for(var r=0;r<e.length&&!0!==t(e[r],r,e.length);r++);}}function l(e){return console.error("[scroll-lock] ".concat(e))}function b(e){if(Array.isArray(e))return e.join(", ")}function a(e){var t=[];return n(e,function(e){return t.push(e)}),t}function v(e,t,r,o){var n=3<arguments.length&&void 0!==o?o:document;if((!(2<arguments.length&&void 0!==r)||r)&&-1!==a(n.querySelectorAll(t)).indexOf(e))return e;for(;(e=e.parentElement)&&-1===a(n.querySelectorAll(t)).indexOf(e););return e}function m(e,t,r){var o=2<arguments.length&&void 0!==r?r:document;return-1!==a(o.querySelectorAll(t)).indexOf(e)}function i(e){return e&&"hidden"===getComputedStyle(e).overflow}function y(e){return e&&(!!i(e)||e.scrollTop<=0)}function S(e){if(e){if(i(e))return 1;var t=e.scrollTop;return e.scrollHeight<=t+e.offsetHeight}}function w(e){return e&&(!!i(e)||e.scrollLeft<=0)}function k(e){if(e){if(i(e))return 1;var t=e.scrollLeft;return e.scrollWidth<=t+e.offsetWidth}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"disablePageScroll",function(){return d}),r.d(t,"enablePageScroll",function(){return f}),r.d(t,"getScrollState",function(){return p}),r.d(t,"clearQueueScrollLocks",function(){return g}),r.d(t,"getTargetScrollBarWidth",function(){return h}),r.d(t,"getCurrentTargetScrollBarWidth",function(){return T}),r.d(t,"getPageScrollBarWidth",function(){return L}),r.d(t,"getCurrentPageScrollBarWidth",function(){return E}),r.d(t,"addScrollableTarget",function(){return q}),r.d(t,"removeScrollableTarget",function(){return x}),r.d(t,"addScrollableSelector",function(){return G}),r.d(t,"removeScrollableSelector",function(){return M}),r.d(t,"addLockableTarget",function(){return F}),r.d(t,"addLockableSelector",function(){return W}),r.d(t,"setFillGapMethod",function(){return O}),r.d(t,"addFillGapTarget",function(){return P}),r.d(t,"removeFillGapTarget",function(){return j}),r.d(t,"addFillGapSelector",function(){return Y}),r.d(t,"removeFillGapSelector",function(){return N}),r.d(t,"refillGaps",function(){return B});var s=["padding","margin","width","max-width","none"],A={scroll:!0,queue:0,scrollableSelectors:["[data-scroll-lock-scrollable]"],lockableSelectors:["body","[data-scroll-lock-lockable]"],fillGapSelectors:["body","[data-scroll-lock-fill-gap]","[data-scroll-lock-lockable]"],fillGapMethod:s[0],startTouchY:0,startTouchX:0},d=function(e){A.queue<=0&&(A.scroll=!1,C(),H()),q(e),A.queue++},f=function(e){0<A.queue&&A.queue--,A.queue<=0&&(A.scroll=!0,_(),I()),x(e)},p=function(){return A.scroll},g=function(){A.queue=0},h=function(e,t){var r=1<arguments.length&&void 0!==t&&t;if(c(e)){var o=e.style.overflowY;r?p()||(e.style.overflowY=e.getAttribute("data-scroll-lock-saved-overflow-y-property")):e.style.overflowY="scroll";var n=T(e);return e.style.overflowY=o,n}return 0},T=function(e){if(c(e)){if(e===document.body){var t=document.documentElement.clientWidth;return window.innerWidth-t}var r=e.style.borderLeftWidth,o=e.style.borderRightWidth;e.style.borderLeftWidth="0px",e.style.borderRightWidth="0px";var n=e.offsetWidth-e.clientWidth;return e.style.borderLeftWidth=r,e.style.borderRightWidth=o,n}return 0},L=function(e){var t=0<arguments.length&&void 0!==e&&e;return h(document.body,t)},E=function(){return T(document.body)},q=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?e.setAttribute("data-scroll-lock-scrollable",""):l('"'.concat(e,'" is not a Element.'))})})},x=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?e.removeAttribute("data-scroll-lock-scrollable"):l('"'.concat(e,'" is not a Element.'))})})},G=function(e){e&&o(e).map(function(e){A.scrollableSelectors.push(e)})},M=function(e){e&&o(e).map(function(t){A.scrollableSelectors=A.scrollableSelectors.filter(function(e){return e!==t})})},F=function(e){e&&(o(e).map(function(e){n(e,function(e){c(e)?e.setAttribute("data-scroll-lock-lockable",""):l('"'.concat(e,'" is not a Element.'))})}),p()||C())},W=function(e){e&&(o(e).map(function(e){A.lockableSelectors.push(e)}),p()||C(),Y(e))},O=function(e){if(e)if(-1!==s.indexOf(e))A.fillGapMethod=e,B();else{var t=s.join(", ");l('"'.concat(e,'" method is not available!\nAvailable fill gap methods: ').concat(t,"."))}},P=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?(e.setAttribute("data-scroll-lock-fill-gap",""),A.scroll||Q(e)):l('"'.concat(e,'" is not a Element.'))})})},j=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?(e.removeAttribute("data-scroll-lock-fill-gap"),A.scroll||V(e)):l('"'.concat(e,'" is not a Element.'))})})},Y=function(e){e&&o(e).map(function(e){-1===A.fillGapSelectors.indexOf(e)&&(A.fillGapSelectors.push(e),A.scroll||X(e))})},N=function(e){e&&o(e).map(function(t){A.fillGapSelectors=A.fillGapSelectors.filter(function(e){return e!==t}),A.scroll||z(t)})},B=function(){A.scroll||H()},C=function(){var e=b(A.lockableSelectors);D(e)},_=function(){var e=b(A.lockableSelectors);R(e)},D=function(e){var t=document.querySelectorAll(e);n(t,function(e){U(e)})},R=function(e){var t=document.querySelectorAll(e);n(t,function(e){K(e)})},U=function(e){if(c(e)&&"true"!==e.getAttribute("data-scroll-lock-locked")){var t=window.getComputedStyle(e);e.setAttribute("data-scroll-lock-saved-overflow-y-property",t.overflowY),e.setAttribute("data-scroll-lock-saved-inline-overflow-property",e.style.overflow),e.setAttribute("data-scroll-lock-saved-inline-overflow-y-property",e.style.overflowY),e.style.overflow="hidden",e.setAttribute("data-scroll-lock-locked","true")}},K=function(e){c(e)&&"true"===e.getAttribute("data-scroll-lock-locked")&&(e.style.overflow=e.getAttribute("data-scroll-lock-saved-inline-overflow-property"),e.style.overflowY=e.getAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-saved-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-locked"))},H=function(){A.fillGapSelectors.map(function(e){X(e)})},I=function(){A.fillGapSelectors.map(function(e){z(e)})},X=function(e){var t=document.querySelectorAll(e),r=-1!==A.lockableSelectors.indexOf(e);n(t,function(e){Q(e,r)})},Q=function(e,t){var r=1<arguments.length&&void 0!==t&&t;if(c(e)){var o;if(""===e.getAttribute("data-scroll-lock-lockable")||r)o=h(e,!0);else{var n=v(e,b(A.lockableSelectors));o=h(n,!0)}"true"===e.getAttribute("data-scroll-lock-filled-gap")&&V(e);var l=window.getComputedStyle(e);if(e.setAttribute("data-scroll-lock-filled-gap","true"),e.setAttribute("data-scroll-lock-current-fill-gap-method",A.fillGapMethod),"margin"===A.fillGapMethod){var a=parseFloat(l.marginRight);e.style.marginRight="".concat(a+o,"px")}else if("width"===A.fillGapMethod)e.style.width="calc(100% - ".concat(o,"px)");else if("max-width"===A.fillGapMethod)e.style.maxWidth="calc(100% - ".concat(o,"px)");else if("padding"===A.fillGapMethod){var i=parseFloat(l.paddingRight);e.style.paddingRight="".concat(i+o,"px")}}},z=function(e){var t=document.querySelectorAll(e);n(t,function(e){V(e)})},V=function(e){if(c(e)&&"true"===e.getAttribute("data-scroll-lock-filled-gap")){var t=e.getAttribute("data-scroll-lock-current-fill-gap-method");e.removeAttribute("data-scroll-lock-filled-gap"),e.removeAttribute("data-scroll-lock-current-fill-gap-method"),"margin"===t?e.style.marginRight="":"width"===t?e.style.width="":"max-width"===t?e.style.maxWidth="":"padding"===t&&(e.style.paddingRight="")}};"undefined"!=typeof window&&window.addEventListener("resize",function(){B()}),"undefined"!=typeof document&&(document.addEventListener("touchstart",function(e){A.scroll||(A.startTouchY=e.touches[0].clientY,A.startTouchX=e.touches[0].clientX)}),document.addEventListener("touchmove",function(a){if(!A.scroll){var e=A.startTouchY,t=A.startTouchX,r=a.touches[0].clientY,o=a.touches[0].clientX;if(a.touches.length<2){var i=b(A.scrollableSelectors),c=e<r,u=r<e,s=t<o,d=o<t,f=e+3<r,p=r<e-3,g=t+3<o,h=o<t-3;!function e(t,r){var o=1<arguments.length&&void 0!==r&&r;if(t){var n=v(t,i,!1);if(m(t,'input[type="range"]'))return!1;if(o||m(t,'textarea, [contenteditable="true"]')&&v(t,i)||m(t,i)){var l=!1;w(t)&&k(t)?(c&&y(t)||u&&S(t))&&(l=!0):y(t)&&S(t)?(s&&w(t)||d&&k(t))&&(l=!0):(f&&y(t)||p&&S(t)||g&&w(t)||h&&k(t))&&(l=!0),l&&(n?e(n,!0):a.preventDefault())}else e(n)}else a.preventDefault()}(a.target)}}},{passive:!1}),document.addEventListener("touchend",function(){A.scroll||(A.startTouchY=0,A.startTouchX=0)}));var J={hide:function(e){l('"hide" is deprecated! Use "disablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget'),d(e)},show:function(e){l('"show" is deprecated! Use "enablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget'),f(e)},toggle:function(e){l('"toggle" is deprecated! Do not use it.'),p()?d():f(e)},getState:function(){return l('"getState" is deprecated! Use "getScrollState" instead. \n https://github.com/FL3NKEY/scroll-lock#getscrollstate'),p()},getWidth:function(){return l('"getWidth" is deprecated! Use "getPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth'),L()},getCurrentWidth:function(){return l('"getCurrentWidth" is deprecated! Use "getCurrentPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth'),E()},setScrollableTargets:function(e){l('"setScrollableTargets" is deprecated! Use "addScrollableTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget'),q(e)},setFillGapSelectors:function(e){l('"setFillGapSelectors" is deprecated! Use "addFillGapSelector" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector'),Y(e)},setFillGapTargets:function(e){l('"setFillGapTargets" is deprecated! Use "addFillGapTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget'),P(e)},clearQueue:function(){l('"clearQueue" is deprecated! Use "clearQueueScrollLocks" instead. \n https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks'),g()}},Z=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(e){u(t,e,r[e])})}return t}({disablePageScroll:d,enablePageScroll:f,getScrollState:p,clearQueueScrollLocks:g,getTargetScrollBarWidth:h,getCurrentTargetScrollBarWidth:T,getPageScrollBarWidth:L,getCurrentPageScrollBarWidth:E,addScrollableSelector:G,removeScrollableSelector:M,addScrollableTarget:q,removeScrollableTarget:x,addLockableSelector:W,addLockableTarget:F,addFillGapSelector:Y,removeFillGapSelector:N,addFillGapTarget:P,removeFillGapTarget:j,setFillGapMethod:O,refillGaps:B,_state:A},J);t.default=Z}],n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===_typeof(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0).default;function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o},e.exports=r()}),l=(t=n)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.container=e,this.triggerBtn=this.container.querySelector("[data-test-api]"),this.requestResult=this.container.querySelector("[data-test-result]"),this.requestUrl=this.triggerBtn.dataset.testApi,this.triggerBtn.addEventListener("click",function(e){t.requestResponse()})}var e,t,o;return e=r,(t=[{key:"requestResponse",value:function(){var t=this;fetch(this.requestUrl).then(function(e){return e.json()}).then(function(e){e&&(t.requestResult.innerHTML=e.title+e.message)})}}])&&a(e.prototype,t),o&&a(e,o),r}();function c(a){var e=document.querySelector("[data-countdow]"),i=e.querySelector("[data-countdow-days]"),c=e.querySelector("[data-countdow-hours]"),u=e.querySelector("[data-countdow-minutes]");function t(){var e,t,r,o,n,l=(e=a,t=Date.parse(e)-Date.parse(new Date),r=Math.floor(t/1e3/60%60),o=Math.floor(t/36e5%24),n=Math.floor(t/864e5),{total:t,days:n,hours:o,minutes:r});i.innerHTML=l.days,c.innerHTML=("0"+l.hours).slice(-2),u.innerHTML=("0"+l.minutes).slice(-2),l.total<=0&&clearInterval(s)}t();var s=setInterval(t,1e3)}function u(e){({control:e.querySelector("[".concat("data-btn-going","]"))}).control.addEventListener("click",function(e){e.preventDefault()})}function s(r){r.addEventListener("click",function(e){e.preventDefault();var t=r.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})})}r();var d=".js-scroll-animation";window.app={header:null,scroll:{disable:l.disablePageScroll,enable:l.enablePageScroll},setInert:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){e.setAttribute("inert",!0)})},removeInert:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){e.removeAttribute("inert")})},initModule:function(t,e){e?Array.prototype.slice.call(document.querySelectorAll(e)).forEach(function(e){new t(e)}):new t},init:function(){app.initModule(i,".js-test-api"),app.initModule(u,".js-invitation"),function(){var r="is-open",o=location.search.split("?=")[1],n=document.querySelector(".js-invitation"),t=n.querySelector("[data-invitation-confirmation]"),e=t.querySelectorAll("[data-btn-going]"),l=n.querySelector("[data-invitation-form]");e.forEach(function(e){e.addEventListener("click",function(){"true"===e.dataset.btnGoing?(db.collection("users").doc(o).update({Coming:!0}),t.classList.remove(r),l.classList.add(r)):"false"===e.dataset.btnGoing&&db.collection("users").doc(o).update({Coming:!1})})});var a=document.querySelector("[data-header-invitation-text]");db.collection("users").get().then(function(e){e.forEach(function(e){if(e.id===o){var t=e.data();a.innerText="".concat(t.Name," ").concat(t.LastName," вы приглашены на свадьбу"),t.Coming||n.classList.add(r)}})}),l.addEventListener("submit",function(e){e.preventDefault(),db.collection("users").doc(o).update({Persons:l.persons.value}),n.classList.remove(r)})}();c("2021-08-07"),app.initModule(s,d)}},window.addEventListener("DOMContentLoaded",app.init)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsImNyZWF0ZUNvbW1vbmpzTW9kdWxlIiwiZm4iLCJtb2R1bGUiLCJleHBvcnRzIiwieCIsInN2ZzRldmVyeWJvZHkiLCJyb290IiwiZW1iZWQiLCJwYXJlbnQiLCJzdmciLCJ0YXJnZXQiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInZpZXdCb3giLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjbG9uZSIsImNsb25lTm9kZSIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJsb2FkcmVhZHlzdGF0ZWNoYW5nZSIsInhociIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJjYWNoZWREb2N1bWVudCIsIl9jYWNoZWREb2N1bWVudCIsImltcGxlbWVudGF0aW9uIiwiY3JlYXRlSFRNTERvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsInJlc3BvbnNlVGV4dCIsIl9jYWNoZWRUYXJnZXQiLCJfZW1iZWRzIiwic3BsaWNlIiwibWFwIiwiaXRlbSIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTVkdBbmNlc3RvciIsIm5vZGUiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsInJhd29wdHMiLCJwb2x5ZmlsbCIsIm9wdHMiLCJPYmplY3QiLCJpbklmcmFtZSIsInRvcCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInJlcXVlc3RzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCIsInVzZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm51bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcyIsIm9uaW50ZXJ2YWwiLCJpbmRleCIsInVzZSIsInNyYyIsImF0dHJpYnV0ZU5hbWUiLCJ2YWxpZGF0ZSIsInJlbW92ZUNoaWxkIiwic3JjU3BsaXQiLCJzcGxpdCIsInVybCIsInNoaWZ0Iiwiam9pbiIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJwdXNoIiwic2Nyb2xsTG9jayIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibSIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiciIsImFyZ3VtZW50QXNBcnJheSIsImFyZ3VtZW50IiwiQXJyYXkiLCJpc0FycmF5IiwiaXNFbGVtZW50IiwiTm9kZSIsImVhY2hOb2RlIiwibm9kZUxpc3QiLCJjYWxsYmFjayIsIk5vZGVMaXN0IiwiaSIsInRocm93RXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwiY29uY2F0IiwiYXJyYXlBc1NlbGVjdG9yIiwiYXJyYXkiLCJub2RlTGlzdEFzQXJyYXkiLCJub2RlcyIsImZpbmRQYXJlbnRCeVNlbGVjdG9yIiwiJGVsIiwic2VsZWN0b3IiLCIkcm9vdCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleE9mIiwicGFyZW50RWxlbWVudCIsImVsZW1lbnRIYXNTZWxlY3RvciIsImVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbiIsImdldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvdyIsImVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0Iiwic2Nyb2xsVG9wIiwiZWxlbWVudFNjcm9sbFRvcE9uRW5kIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0Iiwic2Nyb2xsTGVmdCIsImVsZW1lbnRTY3JvbGxMZWZ0T25FbmQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImQiLCJkaXNhYmxlUGFnZVNjcm9sbCIsImVuYWJsZVBhZ2VTY3JvbGwiLCJnZXRTY3JvbGxTdGF0ZSIsImNsZWFyUXVldWVTY3JvbGxMb2NrcyIsInNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoIiwic2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoIiwiZ2V0UGFnZVNjcm9sbEJhcldpZHRoIiwiZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCIsInNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfc2V0RmlsbEdhcE1ldGhvZCIsInNjcm9sbF9sb2NrX2FkZEZpbGxHYXBUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yIiwicmVmaWxsR2FwcyIsIkZJTExfR0FQX0FWQUlMQUJMRV9NRVRIT0RTIiwic3RhdGUiLCJzY3JvbGwiLCJxdWV1ZSIsInNjcm9sbGFibGVTZWxlY3RvcnMiLCJsb2NrYWJsZVNlbGVjdG9ycyIsImZpbGxHYXBTZWxlY3RvcnMiLCJmaWxsR2FwTWV0aG9kIiwic3RhcnRUb3VjaFkiLCJzdGFydFRvdWNoWCIsInNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93IiwiZmlsbEdhcHMiLCJzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvdyIsInVuZmlsbEdhcHMiLCIkdGFyZ2V0Iiwib25seUV4aXN0cyIsImN1cnJlbnRPdmVyZmxvd1lQcm9wZXJ0eSIsInN0eWxlIiwib3ZlcmZsb3dZIiwid2lkdGgiLCJkb2N1bWVudFdpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lcldpZHRoIiwiYm9yZGVyTGVmdFdpZHRoQ3VycmVudFByb3BlcnR5IiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eSIsImJvcmRlclJpZ2h0V2lkdGgiLCJfY3VycmVudFdpZHRoIiwiJHRhcmdldHMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmaWx0ZXIiLCJzU2VsZWN0b3IiLCJtZXRob2QiLCJtZXRob2RzIiwic2Nyb2xsX2xvY2tfZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvciIsImZTZWxlY3RvciIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3dTZWxlY3RvciIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IiLCJzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0IiwiY29tcHV0ZWRTdHlsZSIsImlzTG9ja2FibGUiLCJzY3JvbGxCYXJXaWR0aCIsIiRsb2NrYWJsZVBhcmVudCIsImN1cnJlbnRNYXJnaW4iLCJwYXJzZUZsb2F0IiwibWFyZ2luUmlnaHQiLCJtYXhXaWR0aCIsImN1cnJlbnRQYWRkaW5nIiwicGFkZGluZ1JpZ2h0IiwiY3VycmVudEZpbGxHYXBNZXRob2QiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRvdWNoZXMiLCJjbGllbnRZIiwiY2xpZW50WCIsImN1cnJlbnRDbGllbnRZIiwiY3VycmVudENsaWVudFgiLCJkaXJlY3Rpb24iLCJkaXJlY3Rpb25XaXRoT2Zmc2V0IiwiaGFuZGxlIiwic2tpcCIsInBhcmVudFNjcm9sbGFibGVFbCIsInByZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBhc3NpdmUiLCJkZXByZWNhdGVkTWV0aG9kcyIsImhpZGUiLCJzaG93IiwidG9nZ2xlIiwiZ2V0U3RhdGUiLCJnZXRXaWR0aCIsImdldEN1cnJlbnRXaWR0aCIsInNldFNjcm9sbGFibGVUYXJnZXRzIiwic2V0RmlsbEdhcFNlbGVjdG9ycyIsInNldEZpbGxHYXBUYXJnZXRzIiwiY2xlYXJRdWV1ZSIsInNvdXJjZSIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZm9yRWFjaCIsIl9vYmplY3RTcHJlYWQiLCJnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCIsImdldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCIsImFkZFNjcm9sbGFibGVTZWxlY3RvciIsInJlbW92ZVNjcm9sbGFibGVTZWxlY3RvciIsImFkZFNjcm9sbGFibGVUYXJnZXQiLCJyZW1vdmVTY3JvbGxhYmxlVGFyZ2V0IiwiYWRkTG9ja2FibGVTZWxlY3RvciIsImFkZExvY2thYmxlVGFyZ2V0IiwiYWRkRmlsbEdhcFNlbGVjdG9yIiwicmVtb3ZlRmlsbEdhcFNlbGVjdG9yIiwiYWRkRmlsbEdhcFRhcmdldCIsInJlbW92ZUZpbGxHYXBUYXJnZXQiLCJzZXRGaWxsR2FwTWV0aG9kIiwiX3N0YXRlIiwiYyIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZ2V0IiwidG9TdHJpbmdUYWciLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwicyIsIm1vZHVsZUlkIiwibCIsInNjcm9sbExvY2skMSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwidGVzdEFwaSIsImNvbnRhaW5lciIsIl90aGlzIiwidGhpcyIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0cmlnZ2VyQnRuIiwicXVlcnlTZWxlY3RvciIsInJlcXVlc3RSZXN1bHQiLCJyZXF1ZXN0VXJsIiwiZGF0YXNldCIsImV2dCIsInJlcXVlc3RSZXNwb25zZSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90aGlzMiIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJ0aXRsZSIsImluaXRpYWxpemVDbG9jayIsImVuZHRpbWUiLCJjbG9jayIsImRheXNTcGFuIiwiaG91cnNTcGFuIiwibWludXRlc1NwYW4iLCJ1cGRhdGVDbG9jayIsInRvdGFsIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsIkRhdGUiLCJwYXJzZSIsIk1hdGgiLCJmbG9vciIsInNsaWNlIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVJbnRlcnZhbCIsInNldEludGVydmFsIiwiaW52aXRhdGlvbiIsImNvbnRyb2wiLCJldmVudCIsIlNjcm9sbEFuaW1hdGlvbiIsImJsb2NrSUQiLCJzdWJzdHIiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJzZWxlY3RvcnMiLCJhcHAiLCJoZWFkZXIiLCJkaXNhYmxlIiwiZW5hYmxlIiwic2V0SW5lcnQiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJyZW1vdmVJbmVydCIsIl9sZW4yIiwiX2tleTIiLCJpbml0TW9kdWxlIiwiTW9kdWxlIiwiaW5pdCIsImNvbmZpZyIsImxvY2F0aW9uIiwic2VhcmNoIiwiY29uZmlybWF0aW9uIiwiYnV0dG9ucyIsImZvcm0iLCJidG4iLCJidG5Hb2luZyIsImRiIiwiY29sbGVjdGlvbiIsImRvYyIsInVwZGF0ZSIsIkNvbWluZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImhlYWRlclRleHQiLCJxdWVyeVNuYXBzaG90IiwiaW5uZXJUZXh0IiwiTmFtZSIsIkxhc3ROYW1lIiwiUGVyc29ucyIsInBlcnNvbnMiLCJmaXJlYmFzZUxvZ2ljIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLFNBQVNBLFFBQVFDLEdBQW1WLE9BQXRPRCxRQUFyRCxtQkFBWEUsUUFBb0QsaUJBQXBCQSxPQUFPQyxTQUFtQyxTQUFpQkYsR0FBTyxjQUFjQSxHQUEyQixTQUFpQkEsR0FBTyxPQUFPQSxHQUF5QixtQkFBWEMsUUFBeUJELEVBQUlHLGNBQWdCRixRQUFVRCxJQUFRQyxPQUFPRyxVQUFZLGdCQUFrQkosSUFBeUJBLElBRW5YLFNBQVdLLEdBQ1MsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPLFVBQVdELEdBQVdBLElBRDVFLENBRUcsV0FHRCxJQUFJRyxFQUF1QyxvQkFBZkMsV0FBNkJBLFdBQStCLG9CQUFYQyxPQUF5QkEsT0FBMkIsb0JBQVhDLE9BQXlCQSxPQUF5QixvQkFBVEMsS0FBdUJBLEtBQU8sR0FNN0wsU0FBU0MsRUFBcUJDLEVBQUlDLEdBQ2hDLE9BRUdELEVBRklDLEVBQVMsQ0FDZEMsUUFBUyxJQUNHRCxFQUFPQyxTQUFVRCxFQUFPQyxRQUd4QyxJQVZ1QkMsRUFVbkJDLEVBQWdCTCxFQUFxQixTQUFVRSxHQUNoRCxJQUFVSSxFQUFNZCxFQUFOYyxFQUtUWCxFQUxlSCxFQUtDLFdBRWhCLFNBQVNlLEVBQU1DLEVBQVFDLEVBQUtDLEdBRTFCLEdBQUlBLEVBQVEsQ0FFVixJQUFJQyxFQUFXQyxTQUFTQyx5QkFDcEJDLEdBQVdMLEVBQUlNLGFBQWEsWUFBY0wsRUFBT00sYUFBYSxXQUVsRUYsR0FBV0wsRUFBSVEsYUFBYSxVQUFXSCxHQUV2QyxJQUNBLElBQUlJLEVBQVFSLEVBQU9TLFdBQVUsR0FBS0QsRUFBTUUsV0FBV0MsUUFDakRWLEVBQVNXLFlBQVlKLEVBQU1LLFlBSTdCZixFQUFPYyxZQUFZWCxJQUl2QixTQUFTYSxFQUFx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UThELFVBQ2RDLEdBQUdDLFdBQVcsU0FBU0MsSUFBSWxVLEdBQUltVSxPQUFPLENBQ3BDQyxRQUFRLElBRVZULEVBQWFVLFVBQVVDLE9BQU9kLEdBQzlCSyxFQUFLUSxVQUFVRSxJQUFJZixJQUNlLFVBQXpCTSxFQUFJN0QsUUFBUThELFVBQ3JCQyxHQUFHQyxXQUFXLFNBQVNDLElBQUlsVSxHQUFJbVUsT0FBTyxDQUNwQ0MsUUFBUSxRQUtoQixJQUFJSSxFQUFhcFcsU0FBUzBSLGNBQWMsaUNBQ3hDa0UsR0FBR0MsV0FBVyxTQUFTakcsTUFBTXdDLEtBQUssU0FBVWlFLEdBQzFDQSxFQUFjN0gsUUFBUSxTQUFVc0gsR0FDOUIsR0FBSUEsRUFBSWxVLEtBQU9BLEVBQUksQ0FDakIsSUFBSTJRLEVBQU91RCxFQUFJdkQsT0FDZjZELEVBQVdFLFVBQVksR0FBRzdRLE9BQU84TSxFQUFLZ0UsS0FBTSxLQUFLOVEsT0FBTzhNLEVBQUtpRSxTQUFVLDZCQUN0RWpFLEVBQUt5RCxRQUFTcEMsRUFBV3FDLFVBQVVFLElBQUlmLFFBSTlDSyxFQUFLakosaUJBQWlCLFNBQVUsU0FBVUMsR0FDeENBLEVBQUVZLGlCQUNGdUksR0FBR0MsV0FBVyxTQUFTQyxJQUFJbFUsR0FBSW1VLE9BQU8sQ0FDcENVLFFBQVNoQixFQUFLaUIsUUFBUW5QLFFBRXhCcU0sRUFBV3FDLFVBQVVDLE9BQU9kLEtBc0c1QnVCLEdBRUFsRSxFQURlLGNBRWY2QixJQUFJVyxXQUFXbEIsRUFBaUJNLEtBR3BDcFYsT0FBT3VOLGlCQUFpQixtQkFBb0I4SCxJQUFJYSIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgnc2NyaXB0cycsIGZhY3RvcnkpIDogZmFjdG9yeSgpO1xufSkoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbiAgZnVuY3Rpb24gdW53cmFwRXhwb3J0cyh4KSB7XG4gICAgcmV0dXJuIHggJiYgeC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnZGVmYXVsdCcpID8geFsnZGVmYXVsdCddIDogeDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBtb2R1bGUpIHtcbiAgICByZXR1cm4gbW9kdWxlID0ge1xuICAgICAgZXhwb3J0czoge31cbiAgICB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7XG4gIH1cblxuICB2YXIgc3ZnNGV2ZXJ5Ym9keSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAhZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICAgIG1vZHVsZS5leHBvcnRzID8gLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDogcm9vdC5zdmc0ZXZlcnlib2R5ID0gZmFjdG9yeSgpO1xuICAgIH0oY29tbW9uanNHbG9iYWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8qISBzdmc0ZXZlcnlib2R5IHYyLjEuOSB8IGdpdGh1Yi5jb20vam9uYXRoYW50bmVhbC9zdmc0ZXZlcnlib2R5ICovXG4gICAgICBmdW5jdGlvbiBlbWJlZChwYXJlbnQsIHN2ZywgdGFyZ2V0KSB7XG4gICAgICAgIC8vIGlmIHRoZSB0YXJnZXQgZXhpc3RzXG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAvLyBjcmVhdGUgYSBkb2N1bWVudCBmcmFnbWVudCB0byBob2xkIHRoZSBjb250ZW50cyBvZiB0aGUgdGFyZ2V0XG4gICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgICAgICAgICB2aWV3Qm94ID0gIXN2Zy5oYXNBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpOyAvLyBjb25kaXRpb25hbGx5IHNldCB0aGUgdmlld0JveCBvbiB0aGUgc3ZnXG5cbiAgICAgICAgICB2aWV3Qm94ICYmIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIHZpZXdCb3gpOyAvLyBjb3B5IHRoZSBjb250ZW50cyBvZiB0aGUgY2xvbmUgaW50byB0aGUgZnJhZ21lbnRcblxuICAgICAgICAgIGZvciAoIC8vIGNsb25lIHRoZSB0YXJnZXRcbiAgICAgICAgICB2YXIgY2xvbmUgPSB0YXJnZXQuY2xvbmVOb2RlKCEwKTsgY2xvbmUuY2hpbGROb2Rlcy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjbG9uZS5maXJzdENoaWxkKTtcbiAgICAgICAgICB9IC8vIGFwcGVuZCB0aGUgZnJhZ21lbnQgaW50byB0aGUgc3ZnXG5cblxuICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbG9hZHJlYWR5c3RhdGVjaGFuZ2UoeGhyKSB7XG4gICAgICAgIC8vIGxpc3RlbiB0byBjaGFuZ2VzIGluIHRoZSByZXF1ZXN0XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaWYgdGhlIHJlcXVlc3QgaXMgcmVhZHlcbiAgICAgICAgICBpZiAoNCA9PT0geGhyLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgY2FjaGVkIGh0bWwgZG9jdW1lbnRcbiAgICAgICAgICAgIHZhciBjYWNoZWREb2N1bWVudCA9IHhoci5fY2FjaGVkRG9jdW1lbnQ7IC8vIGVuc3VyZSB0aGUgY2FjaGVkIGh0bWwgZG9jdW1lbnQgYmFzZWQgb24gdGhlIHhociByZXNwb25zZVxuXG4gICAgICAgICAgICBjYWNoZWREb2N1bWVudCB8fCAoY2FjaGVkRG9jdW1lbnQgPSB4aHIuX2NhY2hlZERvY3VtZW50ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpLCBjYWNoZWREb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IHhoci5yZXNwb25zZVRleHQsIHhoci5fY2FjaGVkVGFyZ2V0ID0ge30pLCAvLyBjbGVhciB0aGUgeGhyIGVtYmVkcyBsaXN0IGFuZCBlbWJlZCBlYWNoIGl0ZW1cbiAgICAgICAgICAgIHhoci5fZW1iZWRzLnNwbGljZSgwKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBjYWNoZWQgdGFyZ2V0XG4gICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB4aHIuX2NhY2hlZFRhcmdldFtpdGVtLmlkXTsgLy8gZW5zdXJlIHRoZSBjYWNoZWQgdGFyZ2V0XG5cbiAgICAgICAgICAgICAgdGFyZ2V0IHx8ICh0YXJnZXQgPSB4aHIuX2NhY2hlZFRhcmdldFtpdGVtLmlkXSA9IGNhY2hlZERvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW0uaWQpKSwgLy8gZW1iZWQgdGhlIHRhcmdldCBpbnRvIHRoZSBzdmdcbiAgICAgICAgICAgICAgZW1iZWQoaXRlbS5wYXJlbnQsIGl0ZW0uc3ZnLCB0YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAvLyB0ZXN0IHRoZSByZWFkeSBzdGF0ZSBjaGFuZ2UgaW1tZWRpYXRlbHlcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzdmc0ZXZlcnlib2R5KHJhd29wdHMpIHtcbiAgICAgICAgZnVuY3Rpb24gb25pbnRlcnZhbCgpIHtcbiAgICAgICAgICAvLyB3aGlsZSB0aGUgaW5kZXggZXhpc3RzIGluIHRoZSBsaXZlIDx1c2U+IGNvbGxlY3Rpb25cbiAgICAgICAgICBmb3IgKCAvLyBnZXQgdGhlIGNhY2hlZCA8dXNlPiBpbmRleFxuICAgICAgICAgIHZhciBpbmRleCA9IDA7IGluZGV4IDwgdXNlcy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGN1cnJlbnQgPHVzZT5cbiAgICAgICAgICAgIHZhciB1c2UgPSB1c2VzW2luZGV4XSxcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSB1c2UucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgICBzdmcgPSBnZXRTVkdBbmNlc3RvcihwYXJlbnQpLFxuICAgICAgICAgICAgICAgIHNyYyA9IHVzZS5nZXRBdHRyaWJ1dGUoXCJ4bGluazpocmVmXCIpIHx8IHVzZS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuXG4gICAgICAgICAgICBpZiAoIXNyYyAmJiBvcHRzLmF0dHJpYnV0ZU5hbWUgJiYgKHNyYyA9IHVzZS5nZXRBdHRyaWJ1dGUob3B0cy5hdHRyaWJ1dGVOYW1lKSksIHN2ZyAmJiBzcmMpIHtcbiAgICAgICAgICAgICAgaWYgKHBvbHlmaWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLnZhbGlkYXRlIHx8IG9wdHMudmFsaWRhdGUoc3JjLCBzdmcsIHVzZSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgPHVzZT4gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKHVzZSk7IC8vIHBhcnNlIHRoZSBzcmMgYW5kIGdldCB0aGUgdXJsIGFuZCBpZFxuXG4gICAgICAgICAgICAgICAgICB2YXIgc3JjU3BsaXQgPSBzcmMuc3BsaXQoXCIjXCIpLFxuICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHNyY1NwbGl0LnNoaWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgaWQgPSBzcmNTcGxpdC5qb2luKFwiI1wiKTsgLy8gaWYgdGhlIGxpbmsgaXMgZXh0ZXJuYWxcblxuICAgICAgICAgICAgICAgICAgaWYgKHVybC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBjYWNoZWQgeGhyIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHJlcXVlc3RzW3VybF07IC8vIGVuc3VyZSB0aGUgeGhyIHJlcXVlc3QgZXhpc3RzXG5cbiAgICAgICAgICAgICAgICAgICAgeGhyIHx8ICh4aHIgPSByZXF1ZXN0c1t1cmxdID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksIHhoci5vcGVuKFwiR0VUXCIsIHVybCksIHhoci5zZW5kKCksIHhoci5fZW1iZWRzID0gW10pLCAvLyBhZGQgdGhlIHN2ZyBhbmQgaWQgYXMgYW4gaXRlbSB0byB0aGUgeGhyIGVtYmVkcyBsaXN0XG4gICAgICAgICAgICAgICAgICAgIHhoci5fZW1iZWRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogcGFyZW50LFxuICAgICAgICAgICAgICAgICAgICAgIHN2Zzogc3ZnLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICAgICAgICAgICAgICB9KSwgLy8gcHJlcGFyZSB0aGUgeGhyIHJlYWR5IHN0YXRlIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgICAgICBsb2FkcmVhZHlzdGF0ZWNoYW5nZSh4aHIpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1iZWQgdGhlIGxvY2FsIGlkIGludG8gdGhlIHN2Z1xuICAgICAgICAgICAgICAgICAgICBlbWJlZChwYXJlbnQsIHN2ZywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gaW5jcmVhc2UgdGhlIGluZGV4IHdoZW4gdGhlIHByZXZpb3VzIHZhbHVlIHdhcyBub3QgXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICArK2luZGV4LCArK251bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBpbmRleCB3aGVuIHRoZSBwcmV2aW91cyB2YWx1ZSB3YXMgbm90IFwidmFsaWRcIlxuICAgICAgICAgICAgICArK2luZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gY29udGludWUgdGhlIGludGVydmFsXG5cblxuICAgICAgICAgICghdXNlcy5sZW5ndGggfHwgdXNlcy5sZW5ndGggLSBudW1iZXJPZlN2Z1VzZUVsZW1lbnRzVG9CeXBhc3MgPiAwKSAmJiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUob25pbnRlcnZhbCwgNjcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBvbHlmaWxsLFxuICAgICAgICAgICAgb3B0cyA9IE9iamVjdChyYXdvcHRzKSxcbiAgICAgICAgICAgIG5ld2VySUVVQSA9IC9cXGJUcmlkZW50XFwvWzU2N11cXGJ8XFxiTVNJRSAoPzo5fDEwKVxcLjBcXGIvLFxuICAgICAgICAgICAgd2Via2l0VUEgPSAvXFxiQXBwbGVXZWJLaXRcXC8oXFxkKylcXGIvLFxuICAgICAgICAgICAgb2xkZXJFZGdlVUEgPSAvXFxiRWRnZVxcLzEyXFwuKFxcZCspXFxiLyxcbiAgICAgICAgICAgIGVkZ2VVQSA9IC9cXGJFZGdlXFwvLihcXGQrKVxcYi8sXG4gICAgICAgICAgICBpbklmcmFtZSA9IHdpbmRvdy50b3AgIT09IHdpbmRvdy5zZWxmO1xuICAgICAgICBwb2x5ZmlsbCA9IFwicG9seWZpbGxcIiBpbiBvcHRzID8gb3B0cy5wb2x5ZmlsbCA6IG5ld2VySUVVQS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKG9sZGVyRWRnZVVBKSB8fCBbXSlbMV0gPCAxMDU0NyB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCh3ZWJraXRVQSkgfHwgW10pWzFdIDwgNTM3IHx8IGVkZ2VVQS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIGluSWZyYW1lOyAvLyBjcmVhdGUgeGhyIHJlcXVlc3RzIG9iamVjdFxuXG4gICAgICAgIHZhciByZXF1ZXN0cyA9IHt9LFxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZXRUaW1lb3V0LFxuICAgICAgICAgICAgdXNlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidXNlXCIpLFxuICAgICAgICAgICAgbnVtYmVyT2ZTdmdVc2VFbGVtZW50c1RvQnlwYXNzID0gMDsgLy8gY29uZGl0aW9uYWxseSBzdGFydCB0aGUgaW50ZXJ2YWwgaWYgdGhlIHBvbHlmaWxsIGlzIGFjdGl2ZVxuXG4gICAgICAgIHBvbHlmaWxsICYmIG9uaW50ZXJ2YWwoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0U1ZHQW5jZXN0b3Iobm9kZSkge1xuICAgICAgICBmb3IgKHZhciBzdmcgPSBub2RlOyBcInN2Z1wiICE9PSBzdmcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAmJiAoc3ZnID0gc3ZnLnBhcmVudE5vZGUpOykge31cblxuICAgICAgICByZXR1cm4gc3ZnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3ZnNGV2ZXJ5Ym9keTtcbiAgICB9KTtcbiAgfSk7XG4gIHZhciBzY3JvbGxMb2NrID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuICAgIChmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgZnVuY3Rpb24gKG1vZHVsZXMpIHtcbiAgICAgICAgICAvLyB3ZWJwYWNrQm9vdHN0cmFwXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIFRoZSBtb2R1bGUgY2FjaGVcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuXG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblxuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIGlmIChpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgICByZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgaTogbW9kdWxlSWQsXG5cbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgbDogZmFsc2UsXG5cbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgZXhwb3J0czoge31cbiAgICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuXG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBtb2R1bGUubCA9IHRydWU7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbiAoZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgaWYgKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogZ2V0dGVyXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIH07XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ01vZHVsZSdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbiAodmFsdWUsIG1vZGUpIHtcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICBpZiAobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBpZiAobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIGlmIChtb2RlICYgNCAmJiBfdHlwZW9mKHZhbHVlKSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgdmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7XG4gICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBpZiAobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgfS5iaW5kKG51bGwsIGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgcmV0dXJuIG5zO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddO1xuICAgICAgICAgICAgfSA6XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gICAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICAgIHJldHVybiBnZXR0ZXI7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIH07XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG5cbiAgICAgICAgICAvKioqKioqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICB9KFxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgICAgIC8qKioqKiovXG4gICAgICAgIFtcbiAgICAgICAgLyogMCAqL1xuXG4gICAgICAgIC8qKiovXG4gICAgICAgIGZ1bmN0aW9uIChtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7IC8vIENPTkNBVEVOQVRFRCBNT0RVTEU6IC4vc3JjL3Rvb2xzLmpzXG5cblxuICAgICAgICAgIHZhciBhcmd1bWVudEFzQXJyYXkgPSBmdW5jdGlvbiBhcmd1bWVudEFzQXJyYXkoYXJndW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZ3VtZW50KSA/IGFyZ3VtZW50IDogW2FyZ3VtZW50XTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGlzRWxlbWVudCA9IGZ1bmN0aW9uIGlzRWxlbWVudCh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBOb2RlO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgaXNFbGVtZW50TGlzdCA9IGZ1bmN0aW9uIGlzRWxlbWVudExpc3Qobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlTGlzdCBpbnN0YW5jZW9mIE5vZGVMaXN0O1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWFjaE5vZGUgPSBmdW5jdGlvbiBlYWNoTm9kZShub2RlTGlzdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGlmIChub2RlTGlzdCAmJiBjYWxsYmFjaykge1xuICAgICAgICAgICAgICBub2RlTGlzdCA9IGlzRWxlbWVudExpc3Qobm9kZUxpc3QpID8gbm9kZUxpc3QgOiBbbm9kZUxpc3RdO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sobm9kZUxpc3RbaV0sIGksIG5vZGVMaXN0Lmxlbmd0aCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgdGhyb3dFcnJvciA9IGZ1bmN0aW9uIHRocm93RXJyb3IobWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbc2Nyb2xsLWxvY2tdIFwiLmNvbmNhdChtZXNzYWdlKSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBhcnJheUFzU2VsZWN0b3IgPSBmdW5jdGlvbiBhcnJheUFzU2VsZWN0b3IoYXJyYXkpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmF5KSkge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBhcnJheS5qb2luKCcsICcpO1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBub2RlTGlzdEFzQXJyYXkgPSBmdW5jdGlvbiBub2RlTGlzdEFzQXJyYXkobm9kZUxpc3QpIHtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgICAgICAgZWFjaE5vZGUobm9kZUxpc3QsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaW5kUGFyZW50QnlTZWxlY3RvciA9IGZ1bmN0aW9uIGZpbmRQYXJlbnRCeVNlbGVjdG9yKCRlbCwgc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuICAgICAgICAgICAgdmFyICRyb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBkb2N1bWVudDtcblxuICAgICAgICAgICAgaWYgKHNlbGYgJiYgbm9kZUxpc3RBc0FycmF5KCRyb290LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5pbmRleE9mKCRlbCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlICgoJGVsID0gJGVsLnBhcmVudEVsZW1lbnQpICYmIG5vZGVMaXN0QXNBcnJheSgkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuaW5kZXhPZigkZWwpID09PSAtMSkge31cblxuICAgICAgICAgICAgcmV0dXJuICRlbDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRIYXNTZWxlY3RvciA9IGZ1bmN0aW9uIGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHJvb3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGRvY3VtZW50O1xuICAgICAgICAgICAgdmFyIGhhcyA9IG5vZGVMaXN0QXNBcnJheSgkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuaW5kZXhPZigkZWwpICE9PSAtMTtcbiAgICAgICAgICAgIHJldHVybiBoYXM7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4gPSBmdW5jdGlvbiBlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSgkZWwpO1xuICAgICAgICAgICAgICB2YXIgb3ZlcmZsb3dJc0hpZGRlbiA9IGNvbXB1dGVkU3R5bGUub3ZlcmZsb3cgPT09ICdoaWRkZW4nO1xuICAgICAgICAgICAgICByZXR1cm4gb3ZlcmZsb3dJc0hpZGRlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0ID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbFRvcE9uU3RhcnQoJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICRlbC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxUb3AgPD0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCA9IGZ1bmN0aW9uIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpIHtcbiAgICAgICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbigkZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJGVsLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9ICRlbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxUb3BXaXRoSGVpZ2h0ID0gc2Nyb2xsVG9wICsgJGVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFRvcFdpdGhIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0ID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkge1xuICAgICAgICAgICAgaWYgKCRlbCkge1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudEhhc092ZXJmbG93SGlkZGVuKCRlbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0ID0gJGVsLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxMZWZ0IDw9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50U2Nyb2xsTGVmdE9uRW5kID0gZnVuY3Rpb24gZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpIHtcbiAgICAgICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbigkZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9ICRlbC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsV2lkdGggPSAkZWwuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxMZWZ0V2l0aFdpZHRoID0gc2Nyb2xsTGVmdCArICRlbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbExlZnRXaXRoV2lkdGggPj0gc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SXNTY3JvbGxhYmxlRmllbGQgPSBmdW5jdGlvbiBlbGVtZW50SXNTY3JvbGxhYmxlRmllbGQoJGVsKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAndGV4dGFyZWEsIFtjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdJztcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50SGFzU2VsZWN0b3IoJGVsLCBzZWxlY3Rvcik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SXNJbnB1dFJhbmdlID0gZnVuY3Rpb24gZWxlbWVudElzSW5wdXRSYW5nZSgkZWwpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICdpbnB1dFt0eXBlPVwicmFuZ2VcIl0nO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgICB9OyAvLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3NyYy9zY3JvbGwtbG9jay5qc1xuXG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRpc2FibGVQYWdlU2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXNhYmxlUGFnZVNjcm9sbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZW5hYmxlUGFnZVNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5hYmxlUGFnZVNjcm9sbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0U2Nyb2xsU3RhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFNjcm9sbFN0YXRlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjbGVhclF1ZXVlU2Nyb2xsTG9ja3NcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsZWFyUXVldWVTY3JvbGxMb2NrcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0UGFnZVNjcm9sbEJhcldpZHRoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRQYWdlU2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZFNjcm9sbGFibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlbW92ZVNjcm9sbGFibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZFNjcm9sbGFibGVTZWxlY3RvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkTG9ja2FibGVUYXJnZXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZExvY2thYmxlVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRMb2NrYWJsZVNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXRGaWxsR2FwTWV0aG9kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19zZXRGaWxsR2FwTWV0aG9kO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRGaWxsR2FwVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRGaWxsR2FwVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVGaWxsR2FwVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRGaWxsR2FwU2VsZWN0b3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlRmlsbEdhcFNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwU2VsZWN0b3I7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlZmlsbEdhcHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlZmlsbEdhcHM7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307XG4gICAgICAgICAgICAgIHZhciBvd25LZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvd25LZXlzID0gb3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvd25LZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBGSUxMX0dBUF9BVkFJTEFCTEVfTUVUSE9EUyA9IFsncGFkZGluZycsICdtYXJnaW4nLCAnd2lkdGgnLCAnbWF4LXdpZHRoJywgJ25vbmUnXTtcbiAgICAgICAgICB2YXIgVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPSAzO1xuICAgICAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgICAgIHNjcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgIHF1ZXVlOiAwLFxuICAgICAgICAgICAgc2Nyb2xsYWJsZVNlbGVjdG9yczogWydbZGF0YS1zY3JvbGwtbG9jay1zY3JvbGxhYmxlXSddLFxuICAgICAgICAgICAgbG9ja2FibGVTZWxlY3RvcnM6IFsnYm9keScsICdbZGF0YS1zY3JvbGwtbG9jay1sb2NrYWJsZV0nXSxcbiAgICAgICAgICAgIGZpbGxHYXBTZWxlY3RvcnM6IFsnYm9keScsICdbZGF0YS1zY3JvbGwtbG9jay1maWxsLWdhcF0nLCAnW2RhdGEtc2Nyb2xsLWxvY2stbG9ja2FibGVdJ10sXG4gICAgICAgICAgICBmaWxsR2FwTWV0aG9kOiBGSUxMX0dBUF9BVkFJTEFCTEVfTUVUSE9EU1swXSxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBzdGFydFRvdWNoWTogMCxcbiAgICAgICAgICAgIHN0YXJ0VG91Y2hYOiAwXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBkaXNhYmxlUGFnZVNjcm9sbCA9IGZ1bmN0aW9uIGRpc2FibGVQYWdlU2Nyb2xsKHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXVlIDw9IDApIHtcbiAgICAgICAgICAgICAgc3RhdGUuc2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93KCk7XG4gICAgICAgICAgICAgIGZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIHN0YXRlLnF1ZXVlKys7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbmFibGVQYWdlU2Nyb2xsID0gZnVuY3Rpb24gZW5hYmxlUGFnZVNjcm9sbCh0YXJnZXQpIHtcbiAgICAgICAgICAgIHN0YXRlLnF1ZXVlID4gMCAmJiBzdGF0ZS5xdWV1ZS0tO1xuXG4gICAgICAgICAgICBpZiAoc3RhdGUucXVldWUgPD0gMCkge1xuICAgICAgICAgICAgICBzdGF0ZS5zY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB1bmZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGdldFNjcm9sbFN0YXRlID0gZnVuY3Rpb24gZ2V0U2Nyb2xsU3RhdGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuc2Nyb2xsO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgY2xlYXJRdWV1ZVNjcm9sbExvY2tzID0gZnVuY3Rpb24gY2xlYXJRdWV1ZVNjcm9sbExvY2tzKCkge1xuICAgICAgICAgICAgc3RhdGUucXVldWUgPSAwO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiBnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgb25seUV4aXN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRPdmVyZmxvd1lQcm9wZXJ0eSA9ICR0YXJnZXQuc3R5bGUub3ZlcmZsb3dZO1xuXG4gICAgICAgICAgICAgIGlmIChvbmx5RXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFnZXRTY3JvbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93WSA9ICR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNhdmVkLW92ZXJmbG93LXktcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAnc2Nyb2xsJztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciB3aWR0aCA9IHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSBjdXJyZW50T3ZlcmZsb3dZUHJvcGVydHk7XG4gICAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoKCR0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgaWYgKCR0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnRXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gd2luZG93V2lkdGggLSBkb2N1bWVudFdpZHRoO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50V2lkdGg7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvcmRlckxlZnRXaWR0aEN1cnJlbnRQcm9wZXJ0eSA9ICR0YXJnZXQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoO1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJSaWdodFdpZHRoQ3VycmVudFByb3BlcnR5ID0gJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gJzBweCc7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzBweCc7XG5cbiAgICAgICAgICAgICAgICB2YXIgX2N1cnJlbnRXaWR0aCA9ICR0YXJnZXQub2Zmc2V0V2lkdGggLSAkdGFyZ2V0LmNsaWVudFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJMZWZ0V2lkdGggPSBib3JkZXJMZWZ0V2lkdGhDdXJyZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2N1cnJlbnRXaWR0aDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBnZXRQYWdlU2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbiBnZXRQYWdlU2Nyb2xsQmFyV2lkdGgoKSB7XG4gICAgICAgICAgICB2YXIgb25seUV4aXN0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoZG9jdW1lbnQuYm9keSwgb25seUV4aXN0cyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBnZXRDdXJyZW50UGFnZVNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19nZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoZG9jdW1lbnQuYm9keSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0ID0gZnVuY3Rpb24gYWRkU2Nyb2xsYWJsZVRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNjcm9sbGFibGUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdCgkdGFyZ2V0LCBcIlxcXCIgaXMgbm90IGEgRWxlbWVudC5cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQgPSBmdW5jdGlvbiByZW1vdmVTY3JvbGxhYmxlVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IGFyZ3VtZW50QXNBcnJheSh0YXJnZXQpO1xuICAgICAgICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoJHRhcmdldHMpIHtcbiAgICAgICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2Nyb2xsYWJsZScpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlU2VsZWN0b3IgPSBmdW5jdGlvbiBhZGRTY3JvbGxhYmxlU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zY3JvbGxhYmxlU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVTZWxlY3RvciA9IGZ1bmN0aW9uIHJlbW92ZVNjcm9sbGFibGVTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBhcmd1bWVudEFzQXJyYXkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLnNjcm9sbGFibGVTZWxlY3RvcnMgPSBzdGF0ZS5zY3JvbGxhYmxlU2VsZWN0b3JzLmZpbHRlcihmdW5jdGlvbiAoc1NlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gc1NlbGVjdG9yICE9PSBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVRhcmdldCA9IGZ1bmN0aW9uIGFkZExvY2thYmxlVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0cyA9IGFyZ3VtZW50QXNBcnJheSh0YXJnZXQpO1xuICAgICAgICAgICAgICB0YXJnZXRzLm1hcChmdW5jdGlvbiAoJHRhcmdldHMpIHtcbiAgICAgICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2FibGUnLCAnJyk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdCgkdGFyZ2V0LCBcIlxcXCIgaXMgbm90IGEgRWxlbWVudC5cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoIWdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yID0gZnVuY3Rpb24gYWRkTG9ja2FibGVTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBhcmd1bWVudEFzQXJyYXkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoIWdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3NldEZpbGxHYXBNZXRob2QgPSBmdW5jdGlvbiBzZXRGaWxsR2FwTWV0aG9kKG1ldGhvZCkge1xuICAgICAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgICBpZiAoRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFMuaW5kZXhPZihtZXRob2QpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLmZpbGxHYXBNZXRob2QgPSBtZXRob2Q7XG4gICAgICAgICAgICAgICAgcmVmaWxsR2FwcygpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBtZXRob2RzID0gRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFMuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdChtZXRob2QsIFwiXFxcIiBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSFcXG5BdmFpbGFibGUgZmlsbCBnYXAgbWV0aG9kczogXCIpLmNvbmNhdChtZXRob2RzLCBcIi5cIikpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19hZGRGaWxsR2FwVGFyZ2V0ID0gZnVuY3Rpb24gYWRkRmlsbEdhcFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGwtZ2FwJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfZmlsbEdhcFRhcmdldCgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0ID0gZnVuY3Rpb24gcmVtb3ZlRmlsbEdhcFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGwtZ2FwJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93RXJyb3IoXCJcXFwiXCIuY29uY2F0KCR0YXJnZXQsIFwiXFxcIiBpcyBub3QgYSBFbGVtZW50LlwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yID0gZnVuY3Rpb24gYWRkRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IGFyZ3VtZW50QXNBcnJheShzZWxlY3Rvcik7XG4gICAgICAgICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmZpbGxHYXBTZWxlY3RvcnMuaW5kZXhPZihzZWxlY3RvcikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5maWxsR2FwU2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja19maWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwU2VsZWN0b3IgPSBmdW5jdGlvbiByZW1vdmVGaWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5maWxsR2FwU2VsZWN0b3JzID0gc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5maWx0ZXIoZnVuY3Rpb24gKGZTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZTZWxlY3RvciAhPT0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfdW5maWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciByZWZpbGxHYXBzID0gZnVuY3Rpb24gcmVmaWxsR2FwcygpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgIGZpbGxHYXBzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdyA9IGZ1bmN0aW9uIGhpZGVMb2NrYWJsZU92ZXJmbG93KCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gYXJyYXlBc1NlbGVjdG9yKHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzKTtcbiAgICAgICAgICAgIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3cgPSBmdW5jdGlvbiBzaG93TG9ja2FibGVPdmVyZmxvdygpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IGFycmF5QXNTZWxlY3RvcihzdGF0ZS5sb2NrYWJsZVNlbGVjdG9ycyk7XG4gICAgICAgICAgICBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IgPSBmdW5jdGlvbiBoaWRlTG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCgkdGFyZ2V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3dTZWxlY3RvciA9IGZ1bmN0aW9uIHNob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHZhciAkdGFyZ2V0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0KCR0YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCA9IGZ1bmN0aW9uIGhpZGVMb2NrYWJsZU92ZXJmbG93VGFyZ2V0KCR0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkgJiYgJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJykgIT09ICd0cnVlJykge1xuICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0YXJnZXQpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1vdmVyZmxvdy15LXByb3BlcnR5JywgY29tcHV0ZWRTdHlsZS5vdmVyZmxvd1kpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknLCAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXktcHJvcGVydHknLCAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93WSk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0ID0gZnVuY3Rpb24gc2hvd0xvY2thYmxlT3ZlcmZsb3dUYXJnZXQoJHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSAmJiAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1sb2NrZWQnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3cteS1wcm9wZXJ0eScpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1vdmVyZmxvdy1wcm9wZXJ0eScpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1pbmxpbmUtb3ZlcmZsb3ctcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXktcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBmaWxsR2FwcyA9IGZ1bmN0aW9uIGZpbGxHYXBzKCkge1xuICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHVuZmlsbEdhcHMgPSBmdW5jdGlvbiB1bmZpbGxHYXBzKCkge1xuICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfZmlsbEdhcFNlbGVjdG9yID0gZnVuY3Rpb24gZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIHZhciBpc0xvY2thYmxlID0gc3RhdGUubG9ja2FibGVTZWxlY3RvcnMuaW5kZXhPZihzZWxlY3RvcikgIT09IC0xO1xuICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2ZpbGxHYXBUYXJnZXQoJHRhcmdldCwgaXNMb2NrYWJsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2ZpbGxHYXBUYXJnZXQgPSBmdW5jdGlvbiBmaWxsR2FwVGFyZ2V0KCR0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBpc0xvY2thYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsQmFyV2lkdGg7XG5cbiAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2thYmxlJykgPT09ICcnIHx8IGlzTG9ja2FibGUpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoKCR0YXJnZXQsIHRydWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciAkbG9ja2FibGVQYXJlbnQgPSBmaW5kUGFyZW50QnlTZWxlY3RvcigkdGFyZ2V0LCBhcnJheUFzU2VsZWN0b3Ioc3RhdGUubG9ja2FibGVTZWxlY3RvcnMpKTtcbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoKCRsb2NrYWJsZVBhcmVudCwgdHJ1ZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCR0YXJnZXQpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsZWQtZ2FwJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stY3VycmVudC1maWxsLWdhcC1tZXRob2QnLCBzdGF0ZS5maWxsR2FwTWV0aG9kKTtcblxuICAgICAgICAgICAgICBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ21hcmdpbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE1hcmdpbiA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5tYXJnaW5SaWdodCk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiXCIuY29uY2F0KGN1cnJlbnRNYXJnaW4gKyBzY3JvbGxCYXJXaWR0aCwgXCJweFwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5maWxsR2FwTWV0aG9kID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS53aWR0aCA9IFwiY2FsYygxMDAlIC0gXCIuY29uY2F0KHNjcm9sbEJhcldpZHRoLCBcInB4KVwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5maWxsR2FwTWV0aG9kID09PSAnbWF4LXdpZHRoJykge1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUubWF4V2lkdGggPSBcImNhbGMoMTAwJSAtIFwiLmNvbmNhdChzY3JvbGxCYXJXaWR0aCwgXCJweClcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ3BhZGRpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWRkaW5nID0gcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlLnBhZGRpbmdSaWdodCk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiLmNvbmNhdChjdXJyZW50UGFkZGluZyArIHNjcm9sbEJhcldpZHRoLCBcInB4XCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja191bmZpbGxHYXBTZWxlY3RvciA9IGZ1bmN0aW9uIHVuZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3VuZmlsbEdhcFRhcmdldCA9IGZ1bmN0aW9uIHVuZmlsbEdhcFRhcmdldCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsZWQtZ2FwJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RmlsbEdhcE1ldGhvZCA9ICR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWN1cnJlbnQtZmlsbC1nYXAtbWV0aG9kJyk7XG4gICAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWN1cnJlbnQtZmlsbC1nYXAtbWV0aG9kJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGxHYXBNZXRob2QgPT09ICdtYXJnaW4nKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm1hcmdpblJpZ2h0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxsR2FwTWV0aG9kID09PSAnd2lkdGgnKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLndpZHRoID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxsR2FwTWV0aG9kID09PSAnbWF4LXdpZHRoJykge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5tYXhXaWR0aCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsbEdhcE1ldGhvZCA9PT0gJ3BhZGRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblJlc2l6ZSA9IGZ1bmN0aW9uIG9uUmVzaXplKGUpIHtcbiAgICAgICAgICAgIHJlZmlsbEdhcHMoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIG9uVG91Y2hTdGFydChlKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWCA9IGUudG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfb25Ub3VjaE1vdmUgPSBmdW5jdGlvbiBvblRvdWNoTW92ZShlKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICB2YXIgc3RhcnRUb3VjaFkgPSBzdGF0ZS5zdGFydFRvdWNoWSxcbiAgICAgICAgICAgICAgICAgIHN0YXJ0VG91Y2hYID0gc3RhdGUuc3RhcnRUb3VjaFg7XG4gICAgICAgICAgICAgIHZhciBjdXJyZW50Q2xpZW50WSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgICAgICB2YXIgY3VycmVudENsaWVudFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcblxuICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBhcnJheUFzU2VsZWN0b3Ioc3RhdGUuc2Nyb2xsYWJsZVNlbGVjdG9ycyk7XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgIHVwOiBzdGFydFRvdWNoWSA8IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgZG93bjogc3RhcnRUb3VjaFkgPiBjdXJyZW50Q2xpZW50WSxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHN0YXJ0VG91Y2hYIDwgY3VycmVudENsaWVudFgsXG4gICAgICAgICAgICAgICAgICByaWdodDogc3RhcnRUb3VjaFggPiBjdXJyZW50Q2xpZW50WFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbldpdGhPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgICB1cDogc3RhcnRUb3VjaFkgKyBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA8IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgZG93bjogc3RhcnRUb3VjaFkgLSBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA+IGN1cnJlbnRDbGllbnRZLFxuICAgICAgICAgICAgICAgICAgbGVmdDogc3RhcnRUb3VjaFggKyBUT1VDSF9ESVJFQ1RJT05fREVURUNUX09GRlNFVCA8IGN1cnJlbnRDbGllbnRYLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IHN0YXJ0VG91Y2hYIC0gVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPiBjdXJyZW50Q2xpZW50WFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKCRlbCkge1xuICAgICAgICAgICAgICAgICAgdmFyIHNraXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRTY3JvbGxhYmxlRWwgPSBmaW5kUGFyZW50QnlTZWxlY3RvcigkZWwsIHNlbGVjdG9yLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRJc0lucHV0UmFuZ2UoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lwIHx8IGVsZW1lbnRJc1Njcm9sbGFibGVGaWVsZCgkZWwpICYmIGZpbmRQYXJlbnRCeVNlbGVjdG9yKCRlbCwgc2VsZWN0b3IpIHx8IGVsZW1lbnRIYXNTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmV2ZW50ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkgJiYgZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uLnVwICYmIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0KCRlbCkgfHwgZGlyZWN0aW9uLmRvd24gJiYgZWxlbWVudFNjcm9sbFRvcE9uRW5kKCRlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50U2Nyb2xsVG9wT25TdGFydCgkZWwpICYmIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uLmxlZnQgJiYgZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0KCRlbCkgfHwgZGlyZWN0aW9uLnJpZ2h0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25FbmQoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbldpdGhPZmZzZXQudXAgJiYgZWxlbWVudFNjcm9sbFRvcE9uU3RhcnQoJGVsKSB8fCBkaXJlY3Rpb25XaXRoT2Zmc2V0LmRvd24gJiYgZWxlbWVudFNjcm9sbFRvcE9uRW5kKCRlbCkgfHwgZGlyZWN0aW9uV2l0aE9mZnNldC5sZWZ0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCgkZWwpIHx8IGRpcmVjdGlvbldpdGhPZmZzZXQucmlnaHQgJiYgZWxlbWVudFNjcm9sbExlZnRPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFNjcm9sbGFibGVFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUocGFyZW50U2Nyb2xsYWJsZUVsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlKHBhcmVudFNjcm9sbGFibGVFbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaGFuZGxlKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb25Ub3VjaEVuZCA9IGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgc3RhdGUuc3RhcnRUb3VjaFkgPSAwO1xuICAgICAgICAgICAgICBzdGF0ZS5zdGFydFRvdWNoWCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBzY3JvbGxfbG9ja19vblRvdWNoTW92ZSwge1xuICAgICAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkZXByZWNhdGVkTWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUodGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiaGlkZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImRpc2FibGVQYWdlU2Nyb2xsXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2Rpc2FibGVwYWdlc2Nyb2xsc2Nyb2xsYWJsZXRhcmdldCcpO1xuICAgICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIHNob3codGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wic2hvd1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImVuYWJsZVBhZ2VTY3JvbGxcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjZW5hYmxlcGFnZXNjcm9sbHNjcm9sbGFibGV0YXJnZXQnKTtcbiAgICAgICAgICAgICAgZW5hYmxlUGFnZVNjcm9sbCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKHRhcmdldCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcInRvZ2dsZVwiIGlzIGRlcHJlY2F0ZWQhIERvIG5vdCB1c2UgaXQuJyk7XG5cbiAgICAgICAgICAgICAgaWYgKGdldFNjcm9sbFN0YXRlKCkpIHtcbiAgICAgICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuYWJsZVBhZ2VTY3JvbGwodGFyZ2V0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFN0YXRlOiBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJnZXRTdGF0ZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldFNjcm9sbFN0YXRlXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2dldHNjcm9sbHN0YXRlJyk7XG4gICAgICAgICAgICAgIHJldHVybiBnZXRTY3JvbGxTdGF0ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbiBnZXRXaWR0aCgpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJnZXRXaWR0aFwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldFBhZ2VTY3JvbGxCYXJXaWR0aFwiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNnZXRwYWdlc2Nyb2xsYmFyd2lkdGgnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldFBhZ2VTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEN1cnJlbnRXaWR0aDogZnVuY3Rpb24gZ2V0Q3VycmVudFdpZHRoKCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcImdldEN1cnJlbnRXaWR0aFwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGhcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjZ2V0Y3VycmVudHBhZ2VzY3JvbGxiYXJ3aWR0aCcpO1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNjcm9sbGFibGVUYXJnZXRzOiBmdW5jdGlvbiBzZXRTY3JvbGxhYmxlVGFyZ2V0cyh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRTY3JvbGxhYmxlVGFyZ2V0c1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImFkZFNjcm9sbGFibGVUYXJnZXRcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjYWRkc2Nyb2xsYWJsZXRhcmdldHNjcm9sbGFibGV0YXJnZXQnKTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEZpbGxHYXBTZWxlY3RvcnM6IGZ1bmN0aW9uIHNldEZpbGxHYXBTZWxlY3RvcnMoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRGaWxsR2FwU2VsZWN0b3JzXCIgaXMgZGVwcmVjYXRlZCEgVXNlIFwiYWRkRmlsbEdhcFNlbGVjdG9yXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2FkZGZpbGxnYXBzZWxlY3RvcmZpbGxnYXBzZWxlY3RvcicpO1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19hZGRGaWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldEZpbGxHYXBUYXJnZXRzOiBmdW5jdGlvbiBzZXRGaWxsR2FwVGFyZ2V0cyh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJzZXRGaWxsR2FwVGFyZ2V0c1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImFkZEZpbGxHYXBUYXJnZXRcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjYWRkZmlsbGdhcHRhcmdldGZpbGxnYXB0YXJnZXQnKTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUXVldWU6IGZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiY2xlYXJRdWV1ZVwiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImNsZWFyUXVldWVTY3JvbGxMb2Nrc1wiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNjbGVhcnF1ZXVlc2Nyb2xsbG9ja3MnKTtcbiAgICAgICAgICAgICAgY2xlYXJRdWV1ZVNjcm9sbExvY2tzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxMb2NrID0gX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgICBkaXNhYmxlUGFnZVNjcm9sbDogZGlzYWJsZVBhZ2VTY3JvbGwsXG4gICAgICAgICAgICBlbmFibGVQYWdlU2Nyb2xsOiBlbmFibGVQYWdlU2Nyb2xsLFxuICAgICAgICAgICAgZ2V0U2Nyb2xsU3RhdGU6IGdldFNjcm9sbFN0YXRlLFxuICAgICAgICAgICAgY2xlYXJRdWV1ZVNjcm9sbExvY2tzOiBjbGVhclF1ZXVlU2Nyb2xsTG9ja3MsXG4gICAgICAgICAgICBnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aDogc2Nyb2xsX2xvY2tfZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgsXG4gICAgICAgICAgICBnZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGg6IHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCxcbiAgICAgICAgICAgIGdldFBhZ2VTY3JvbGxCYXJXaWR0aDogZ2V0UGFnZVNjcm9sbEJhcldpZHRoLFxuICAgICAgICAgICAgZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aDogZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCxcbiAgICAgICAgICAgIGFkZFNjcm9sbGFibGVTZWxlY3Rvcjogc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yLFxuICAgICAgICAgICAgcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yOiBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3IsXG4gICAgICAgICAgICBhZGRTY3JvbGxhYmxlVGFyZ2V0OiBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0LFxuICAgICAgICAgICAgcmVtb3ZlU2Nyb2xsYWJsZVRhcmdldDogc2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVRhcmdldCxcbiAgICAgICAgICAgIGFkZExvY2thYmxlU2VsZWN0b3I6IHNjcm9sbF9sb2NrX2FkZExvY2thYmxlU2VsZWN0b3IsXG4gICAgICAgICAgICBhZGRMb2NrYWJsZVRhcmdldDogc2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQsXG4gICAgICAgICAgICBhZGRGaWxsR2FwU2VsZWN0b3I6IHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvcixcbiAgICAgICAgICAgIHJlbW92ZUZpbGxHYXBTZWxlY3Rvcjogc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yLFxuICAgICAgICAgICAgYWRkRmlsbEdhcFRhcmdldDogc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldCxcbiAgICAgICAgICAgIHJlbW92ZUZpbGxHYXBUYXJnZXQ6IHNjcm9sbF9sb2NrX3JlbW92ZUZpbGxHYXBUYXJnZXQsXG4gICAgICAgICAgICBzZXRGaWxsR2FwTWV0aG9kOiBzY3JvbGxfbG9ja19zZXRGaWxsR2FwTWV0aG9kLFxuICAgICAgICAgICAgcmVmaWxsR2FwczogcmVmaWxsR2FwcyxcbiAgICAgICAgICAgIF9zdGF0ZTogc3RhdGVcbiAgICAgICAgICB9LCBkZXByZWNhdGVkTWV0aG9kcyk7XG4gICAgICAgICAgLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqL1xuXG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2sgPSBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IHNjcm9sbExvY2s7XG4gICAgICAgICAgLyoqKi9cbiAgICAgICAgfVxuICAgICAgICAvKioqKioqL1xuICAgICAgICBdKVtcImRlZmF1bHRcIl1cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuICB2YXIgc2Nyb2xsTG9jayQxID0gdW53cmFwRXhwb3J0cyhzY3JvbGxMb2NrKTtcblxuICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9XG5cbiAgdmFyIHRlc3RBcGkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHRlc3RBcGkoY29udGFpbmVyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgdGVzdEFwaSk7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgdGhpcy50cmlnZ2VyQnRuID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdC1hcGldJyk7XG4gICAgICB0aGlzLnJlcXVlc3RSZXN1bHQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10ZXN0LXJlc3VsdF0nKTtcbiAgICAgIHRoaXMucmVxdWVzdFVybCA9IHRoaXMudHJpZ2dlckJ0bi5kYXRhc2V0LnRlc3RBcGk7XG4gICAgICB0aGlzLnRyaWdnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIF90aGlzLnJlcXVlc3RSZXNwb25zZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKHRlc3RBcGksIFt7XG4gICAgICBrZXk6IFwicmVxdWVzdFJlc3BvbnNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdFJlc3BvbnNlKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICBmZXRjaCh0aGlzLnJlcXVlc3RVcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBfdGhpczIucmVxdWVzdFJlc3VsdC5pbm5lckhUTUwgPSBkYXRhLnRpdGxlICsgZGF0YS5tZXNzYWdlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIHRlc3RBcGk7XG4gIH0oKTtcblxuICBmdW5jdGlvbiBmaXJlYmFzZUxvZ2ljKCkge1xuICAgIHZhciBjb25maWcgPSB7XG4gICAgICBvcGVuQ2xhc3M6ICdpcy1vcGVuJ1xuICAgIH07XG4gICAgdmFyIGlkID0gbG9jYXRpb24uc2VhcmNoLnNwbGl0KCc/PScpWzFdO1xuICAgIHZhciBpbnZpdGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWludml0YXRpb24nKTtcbiAgICB2YXIgY29uZmlybWF0aW9uID0gaW52aXRhdGlvbi5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnZpdGF0aW9uLWNvbmZpcm1hdGlvbl0nKTtcbiAgICB2YXIgYnV0dG9ucyA9IGNvbmZpcm1hdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1idG4tZ29pbmddJyk7XG4gICAgdmFyIGZvcm0gPSBpbnZpdGF0aW9uLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWludml0YXRpb24tZm9ybV0nKTtcbiAgICBidXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGJ0bikge1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYnRuLmRhdGFzZXQuYnRuR29pbmcgPT09ICd0cnVlJykge1xuICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKGlkKS51cGRhdGUoe1xuICAgICAgICAgICAgQ29taW5nOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uZmlybWF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLm9wZW5DbGFzcyk7XG4gICAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKGNvbmZpZy5vcGVuQ2xhc3MpO1xuICAgICAgICB9IGVsc2UgaWYgKGJ0bi5kYXRhc2V0LmJ0bkdvaW5nID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2MoaWQpLnVwZGF0ZSh7XG4gICAgICAgICAgICBDb21pbmc6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHZhciBoZWFkZXJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaGVhZGVyLWludml0YXRpb24tdGV4dF0nKTtcbiAgICBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHtcbiAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgIGlmIChkb2MuaWQgPT09IGlkKSB7XG4gICAgICAgICAgdmFyIGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIGhlYWRlclRleHQuaW5uZXJUZXh0ID0gXCJcIi5jb25jYXQoZGF0YS5OYW1lLCBcIiBcIikuY29uY2F0KGRhdGEuTGFzdE5hbWUsIFwiIFxcdTA0MzJcXHUwNDRCIFxcdTA0M0ZcXHUwNDQwXFx1MDQzOFxcdTA0MzNcXHUwNDNCXFx1MDQzMFxcdTA0NDhcXHUwNDM1XFx1MDQzRFxcdTA0NEIgXFx1MDQzRFxcdTA0MzAgXFx1MDQ0MVxcdTA0MzJcXHUwNDMwXFx1MDQzNFxcdTA0NENcXHUwNDMxXFx1MDQ0M1wiKTtcbiAgICAgICAgICAhZGF0YS5Db21pbmcgPyBpbnZpdGF0aW9uLmNsYXNzTGlzdC5hZGQoY29uZmlnLm9wZW5DbGFzcykgOiBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhpZCkudXBkYXRlKHtcbiAgICAgICAgUGVyc29uczogZm9ybS5wZXJzb25zLnZhbHVlXG4gICAgICB9KTtcbiAgICAgIGludml0YXRpb24uY2xhc3NMaXN0LnJlbW92ZShjb25maWcub3BlbkNsYXNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRpYWxpemVDbG9jayhlbmR0aW1lKSB7XG4gICAgdmFyIGNsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWNvdW50ZG93XVwiKTtcbiAgICB2YXIgZGF5c1NwYW4gPSBjbG9jay5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY291bnRkb3ctZGF5c11cIik7XG4gICAgdmFyIGhvdXJzU3BhbiA9IGNsb2NrLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jb3VudGRvdy1ob3Vyc11cIik7XG4gICAgdmFyIG1pbnV0ZXNTcGFuID0gY2xvY2sucXVlcnlTZWxlY3RvcihcIltkYXRhLWNvdW50ZG93LW1pbnV0ZXNdXCIpO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2xvY2soKSB7XG4gICAgICB2YXIgdG90YWwgPSBnZXRUaW1lUmVtYWluaW5nKGVuZHRpbWUpO1xuICAgICAgZGF5c1NwYW4uaW5uZXJIVE1MID0gdG90YWwuZGF5cztcbiAgICAgIGhvdXJzU3Bhbi5pbm5lckhUTUwgPSAoJzAnICsgdG90YWwuaG91cnMpLnNsaWNlKC0yKTtcbiAgICAgIG1pbnV0ZXNTcGFuLmlubmVySFRNTCA9ICgnMCcgKyB0b3RhbC5taW51dGVzKS5zbGljZSgtMik7XG5cbiAgICAgIGlmICh0b3RhbC50b3RhbCA8PSAwKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZUludGVydmFsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVDbG9jaygpO1xuICAgIHZhciB0aW1lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVDbG9jaywgMTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUaW1lUmVtYWluaW5nKGVuZHRpbWUpIHtcbiAgICB2YXIgdG90YWwgPSBEYXRlLnBhcnNlKGVuZHRpbWUpIC0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTtcbiAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWwgLyAxMDAwIC8gNjAgJSA2MCk7XG4gICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcih0b3RhbCAvICgxMDAwICogNjAgKiA2MCkgJSAyNCk7XG4gICAgdmFyIGRheXMgPSBNYXRoLmZsb29yKHRvdGFsIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICByZXR1cm4ge1xuICAgICAgJ3RvdGFsJzogdG90YWwsXG4gICAgICAnZGF5cyc6IGRheXMsXG4gICAgICAnaG91cnMnOiBob3VycyxcbiAgICAgICdtaW51dGVzJzogbWludXRlc1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBpbnZpdGF0aW9uKGludml0YXRpb24pIHtcbiAgICB2YXIgc2VsZWN0b3JzID0ge1xuICAgICAgY29udHJvbDogJ2RhdGEtYnRuLWdvaW5nJ1xuICAgIH07XG4gICAgdmFyIG1vZGVsID0ge1xuICAgICAgY29udHJvbDogaW52aXRhdGlvbi5xdWVyeVNlbGVjdG9yKFwiW1wiLmNvbmNhdChzZWxlY3RvcnMuY29udHJvbCwgXCJdXCIpKVxuICAgIH07XG4gICAgbW9kZWwuY29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFNjcm9sbEFuaW1hdGlvbihpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgYmxvY2tJRCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdocmVmJykuc3Vic3RyKDEpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmxvY2tJRCkuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXG4gICAgICAgIGJsb2NrOiAnc3RhcnQnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHN2ZzRldmVyeWJvZHkoKTtcbiAgdmFyIHNlbGVjdG9ycyA9IHtcbiAgICBzY3JvbGxBbmltYXRpb246ICcuanMtc2Nyb2xsLWFuaW1hdGlvbidcbiAgfTtcbiAgd2luZG93LmFwcCA9IHtcbiAgICBoZWFkZXI6IG51bGwsXG4gICAgc2Nyb2xsOiB7XG4gICAgICBkaXNhYmxlOiBzY3JvbGxMb2NrJDEuZGlzYWJsZVBhZ2VTY3JvbGwsXG4gICAgICBlbmFibGU6IHNjcm9sbExvY2skMS5lbmFibGVQYWdlU2Nyb2xsXG4gICAgfSxcbiAgICBzZXRJbmVydDogZnVuY3Rpb24gc2V0SW5lcnQoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdpbmVydCcsIHRydWUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICByZW1vdmVJbmVydDogZnVuY3Rpb24gcmVtb3ZlSW5lcnQoKSB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ2luZXJ0Jyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGluaXRNb2R1bGU6IGZ1bmN0aW9uIGluaXRNb2R1bGUoTW9kdWxlLCBzZWxlY3Rvcikge1xuICAgICAgaWYgKCEhc2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGJsb2NrcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbiAgICAgICAgYmxvY2tzLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrKSB7XG4gICAgICAgICAgbmV3IE1vZHVsZShibG9jayk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE1vZHVsZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5pbml0TW9kdWxlKHRlc3RBcGksICcuanMtdGVzdC1hcGknKTtcbiAgICAgIGFwcC5pbml0TW9kdWxlKGludml0YXRpb24sICcuanMtaW52aXRhdGlvbicpO1xuICAgICAgZmlyZWJhc2VMb2dpYygpO1xuICAgICAgdmFyIGRlYWRsaW5lID0gJzIwMjEtMDgtMDcnO1xuICAgICAgaW5pdGlhbGl6ZUNsb2NrKGRlYWRsaW5lKTtcbiAgICAgIGFwcC5pbml0TW9kdWxlKFNjcm9sbEFuaW1hdGlvbiwgc2VsZWN0b3JzLnNjcm9sbEFuaW1hdGlvbik7XG4gICAgfVxuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFwcC5pbml0KTtcbn0pOyJdfQ==
