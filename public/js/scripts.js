"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define("scripts",e):e()}(function(){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t,r=e(function(e){var t,r;t=o,r=function(){function b(e,t,r){if(r){var o=document.createDocumentFragment(),n=!t.hasAttribute("viewBox")&&r.getAttribute("viewBox");n&&t.setAttribute("viewBox",n);for(var l=r.cloneNode(!0);l.childNodes.length;)o.appendChild(l.firstChild);e.appendChild(o)}}function v(o){o.onreadystatechange=function(){if(4===o.readyState){var r=o._cachedDocument;r||((r=o._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=o.responseText,o._cachedTarget={}),o._embeds.splice(0).map(function(e){var t=o._cachedTarget[e.id];t=t||(o._cachedTarget[e.id]=r.getElementById(e.id)),b(e.parent,e.svg,t)})}},o.onreadystatechange()}function m(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return function(e){var s,d=Object(e),t=window.top!==window.self;s="polyfill"in d?d.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537||/\bEdge\/.(\d+)\b/.test(navigator.userAgent)&&t;var f={},p=window.requestAnimationFrame||setTimeout,g=document.getElementsByTagName("use"),h=0;s&&function e(){for(var t=0;t<g.length;){var r=g[t],o=r.parentNode,n=m(o),l=r.getAttribute("xlink:href")||r.getAttribute("href");if(!l&&d.attributeName&&(l=r.getAttribute(d.attributeName)),n&&l){if(s)if(!d.validate||d.validate(l,n,r)){o.removeChild(r);var a=l.split("#"),i=a.shift(),c=a.join("#");if(i.length){var u=f[i];u||((u=f[i]=new XMLHttpRequest).open("GET",i),u.send(),u._embeds=[]),u._embeds.push({parent:o,svg:n,id:c}),v(u)}else b(o,n,document.getElementById(c))}else++t,++h}else++t}(!g.length||0<g.length-h)&&p(e,67)}()}},e.exports?e.exports=r():t.svg4everybody=r()}),n=e(function(e,t){var r;r=function(){return o={},n.m=r=[function(e,t,r){r.r(t);function o(e){return Array.isArray(e)?e:[e]}function c(e){return e instanceof Node}function n(e,t){if(e&&t){e=e instanceof NodeList?e:[e];for(var r=0;r<e.length&&!0!==t(e[r],r,e.length);r++);}}function l(e){return console.error("[scroll-lock] ".concat(e))}function b(e){if(Array.isArray(e))return e.join(", ")}function a(e){var t=[];return n(e,function(e){return t.push(e)}),t}function v(e,t,r,o){var n=3<arguments.length&&void 0!==o?o:document;if((!(2<arguments.length&&void 0!==r)||r)&&-1!==a(n.querySelectorAll(t)).indexOf(e))return e;for(;(e=e.parentElement)&&-1===a(n.querySelectorAll(t)).indexOf(e););return e}function m(e,t,r){var o=2<arguments.length&&void 0!==r?r:document;return-1!==a(o.querySelectorAll(t)).indexOf(e)}function i(e){return e&&"hidden"===getComputedStyle(e).overflow}function y(e){return e&&(!!i(e)||e.scrollTop<=0)}function S(e){if(e){if(i(e))return 1;var t=e.scrollTop;return e.scrollHeight<=t+e.offsetHeight}}function w(e){return e&&(!!i(e)||e.scrollLeft<=0)}function k(e){if(e){if(i(e))return 1;var t=e.scrollLeft;return e.scrollWidth<=t+e.offsetWidth}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"disablePageScroll",function(){return d}),r.d(t,"enablePageScroll",function(){return f}),r.d(t,"getScrollState",function(){return p}),r.d(t,"clearQueueScrollLocks",function(){return g}),r.d(t,"getTargetScrollBarWidth",function(){return h}),r.d(t,"getCurrentTargetScrollBarWidth",function(){return T}),r.d(t,"getPageScrollBarWidth",function(){return L}),r.d(t,"getCurrentPageScrollBarWidth",function(){return E}),r.d(t,"addScrollableTarget",function(){return q}),r.d(t,"removeScrollableTarget",function(){return x}),r.d(t,"addScrollableSelector",function(){return G}),r.d(t,"removeScrollableSelector",function(){return M}),r.d(t,"addLockableTarget",function(){return F}),r.d(t,"addLockableSelector",function(){return W}),r.d(t,"setFillGapMethod",function(){return O}),r.d(t,"addFillGapTarget",function(){return P}),r.d(t,"removeFillGapTarget",function(){return j}),r.d(t,"addFillGapSelector",function(){return Y}),r.d(t,"removeFillGapSelector",function(){return N}),r.d(t,"refillGaps",function(){return B});var s=["padding","margin","width","max-width","none"],A={scroll:!0,queue:0,scrollableSelectors:["[data-scroll-lock-scrollable]"],lockableSelectors:["body","[data-scroll-lock-lockable]"],fillGapSelectors:["body","[data-scroll-lock-fill-gap]","[data-scroll-lock-lockable]"],fillGapMethod:s[0],startTouchY:0,startTouchX:0},d=function(e){A.queue<=0&&(A.scroll=!1,C(),H()),q(e),A.queue++},f=function(e){0<A.queue&&A.queue--,A.queue<=0&&(A.scroll=!0,_(),I()),x(e)},p=function(){return A.scroll},g=function(){A.queue=0},h=function(e,t){var r=1<arguments.length&&void 0!==t&&t;if(c(e)){var o=e.style.overflowY;r?p()||(e.style.overflowY=e.getAttribute("data-scroll-lock-saved-overflow-y-property")):e.style.overflowY="scroll";var n=T(e);return e.style.overflowY=o,n}return 0},T=function(e){if(c(e)){if(e===document.body){var t=document.documentElement.clientWidth;return window.innerWidth-t}var r=e.style.borderLeftWidth,o=e.style.borderRightWidth;e.style.borderLeftWidth="0px",e.style.borderRightWidth="0px";var n=e.offsetWidth-e.clientWidth;return e.style.borderLeftWidth=r,e.style.borderRightWidth=o,n}return 0},L=function(e){var t=0<arguments.length&&void 0!==e&&e;return h(document.body,t)},E=function(){return T(document.body)},q=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?e.setAttribute("data-scroll-lock-scrollable",""):l('"'.concat(e,'" is not a Element.'))})})},x=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?e.removeAttribute("data-scroll-lock-scrollable"):l('"'.concat(e,'" is not a Element.'))})})},G=function(e){e&&o(e).map(function(e){A.scrollableSelectors.push(e)})},M=function(e){e&&o(e).map(function(t){A.scrollableSelectors=A.scrollableSelectors.filter(function(e){return e!==t})})},F=function(e){e&&(o(e).map(function(e){n(e,function(e){c(e)?e.setAttribute("data-scroll-lock-lockable",""):l('"'.concat(e,'" is not a Element.'))})}),p()||C())},W=function(e){e&&(o(e).map(function(e){A.lockableSelectors.push(e)}),p()||C(),Y(e))},O=function(e){if(e)if(-1!==s.indexOf(e))A.fillGapMethod=e,B();else{var t=s.join(", ");l('"'.concat(e,'" method is not available!\nAvailable fill gap methods: ').concat(t,"."))}},P=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?(e.setAttribute("data-scroll-lock-fill-gap",""),A.scroll||Q(e)):l('"'.concat(e,'" is not a Element.'))})})},j=function(e){e&&o(e).map(function(e){n(e,function(e){c(e)?(e.removeAttribute("data-scroll-lock-fill-gap"),A.scroll||V(e)):l('"'.concat(e,'" is not a Element.'))})})},Y=function(e){e&&o(e).map(function(e){-1===A.fillGapSelectors.indexOf(e)&&(A.fillGapSelectors.push(e),A.scroll||X(e))})},N=function(e){e&&o(e).map(function(t){A.fillGapSelectors=A.fillGapSelectors.filter(function(e){return e!==t}),A.scroll||z(t)})},B=function(){A.scroll||H()},C=function(){var e=b(A.lockableSelectors);D(e)},_=function(){var e=b(A.lockableSelectors);R(e)},D=function(e){var t=document.querySelectorAll(e);n(t,function(e){U(e)})},R=function(e){var t=document.querySelectorAll(e);n(t,function(e){K(e)})},U=function(e){if(c(e)&&"true"!==e.getAttribute("data-scroll-lock-locked")){var t=window.getComputedStyle(e);e.setAttribute("data-scroll-lock-saved-overflow-y-property",t.overflowY),e.setAttribute("data-scroll-lock-saved-inline-overflow-property",e.style.overflow),e.setAttribute("data-scroll-lock-saved-inline-overflow-y-property",e.style.overflowY),e.style.overflow="hidden",e.setAttribute("data-scroll-lock-locked","true")}},K=function(e){c(e)&&"true"===e.getAttribute("data-scroll-lock-locked")&&(e.style.overflow=e.getAttribute("data-scroll-lock-saved-inline-overflow-property"),e.style.overflowY=e.getAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-saved-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-property"),e.removeAttribute("data-scroll-lock-saved-inline-overflow-y-property"),e.removeAttribute("data-scroll-lock-locked"))},H=function(){A.fillGapSelectors.map(function(e){X(e)})},I=function(){A.fillGapSelectors.map(function(e){z(e)})},X=function(e){var t=document.querySelectorAll(e),r=-1!==A.lockableSelectors.indexOf(e);n(t,function(e){Q(e,r)})},Q=function(e,t){var r=1<arguments.length&&void 0!==t&&t;if(c(e)){var o;if(""===e.getAttribute("data-scroll-lock-lockable")||r)o=h(e,!0);else{var n=v(e,b(A.lockableSelectors));o=h(n,!0)}"true"===e.getAttribute("data-scroll-lock-filled-gap")&&V(e);var l=window.getComputedStyle(e);if(e.setAttribute("data-scroll-lock-filled-gap","true"),e.setAttribute("data-scroll-lock-current-fill-gap-method",A.fillGapMethod),"margin"===A.fillGapMethod){var a=parseFloat(l.marginRight);e.style.marginRight="".concat(a+o,"px")}else if("width"===A.fillGapMethod)e.style.width="calc(100% - ".concat(o,"px)");else if("max-width"===A.fillGapMethod)e.style.maxWidth="calc(100% - ".concat(o,"px)");else if("padding"===A.fillGapMethod){var i=parseFloat(l.paddingRight);e.style.paddingRight="".concat(i+o,"px")}}},z=function(e){var t=document.querySelectorAll(e);n(t,function(e){V(e)})},V=function(e){if(c(e)&&"true"===e.getAttribute("data-scroll-lock-filled-gap")){var t=e.getAttribute("data-scroll-lock-current-fill-gap-method");e.removeAttribute("data-scroll-lock-filled-gap"),e.removeAttribute("data-scroll-lock-current-fill-gap-method"),"margin"===t?e.style.marginRight="":"width"===t?e.style.width="":"max-width"===t?e.style.maxWidth="":"padding"===t&&(e.style.paddingRight="")}};"undefined"!=typeof window&&window.addEventListener("resize",function(){B()}),"undefined"!=typeof document&&(document.addEventListener("touchstart",function(e){A.scroll||(A.startTouchY=e.touches[0].clientY,A.startTouchX=e.touches[0].clientX)}),document.addEventListener("touchmove",function(a){if(!A.scroll){var e=A.startTouchY,t=A.startTouchX,r=a.touches[0].clientY,o=a.touches[0].clientX;if(a.touches.length<2){var i=b(A.scrollableSelectors),c=e<r,u=r<e,s=t<o,d=o<t,f=e+3<r,p=r<e-3,g=t+3<o,h=o<t-3;!function e(t,r){var o=1<arguments.length&&void 0!==r&&r;if(t){var n=v(t,i,!1);if(m(t,'input[type="range"]'))return!1;if(o||m(t,'textarea, [contenteditable="true"]')&&v(t,i)||m(t,i)){var l=!1;w(t)&&k(t)?(c&&y(t)||u&&S(t))&&(l=!0):y(t)&&S(t)?(s&&w(t)||d&&k(t))&&(l=!0):(f&&y(t)||p&&S(t)||g&&w(t)||h&&k(t))&&(l=!0),l&&(n?e(n,!0):a.preventDefault())}else e(n)}else a.preventDefault()}(a.target)}}},{passive:!1}),document.addEventListener("touchend",function(){A.scroll||(A.startTouchY=0,A.startTouchX=0)}));var J={hide:function(e){l('"hide" is deprecated! Use "disablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget'),d(e)},show:function(e){l('"show" is deprecated! Use "enablePageScroll" instead. \n https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget'),f(e)},toggle:function(e){l('"toggle" is deprecated! Do not use it.'),p()?d():f(e)},getState:function(){return l('"getState" is deprecated! Use "getScrollState" instead. \n https://github.com/FL3NKEY/scroll-lock#getscrollstate'),p()},getWidth:function(){return l('"getWidth" is deprecated! Use "getPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth'),L()},getCurrentWidth:function(){return l('"getCurrentWidth" is deprecated! Use "getCurrentPageScrollBarWidth" instead. \n https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth'),E()},setScrollableTargets:function(e){l('"setScrollableTargets" is deprecated! Use "addScrollableTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget'),q(e)},setFillGapSelectors:function(e){l('"setFillGapSelectors" is deprecated! Use "addFillGapSelector" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector'),Y(e)},setFillGapTargets:function(e){l('"setFillGapTargets" is deprecated! Use "addFillGapTarget" instead. \n https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget'),P(e)},clearQueue:function(){l('"clearQueue" is deprecated! Use "clearQueueScrollLocks" instead. \n https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks'),g()}},Z=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(e){u(t,e,r[e])})}return t}({disablePageScroll:d,enablePageScroll:f,getScrollState:p,clearQueueScrollLocks:g,getTargetScrollBarWidth:h,getCurrentTargetScrollBarWidth:T,getPageScrollBarWidth:L,getCurrentPageScrollBarWidth:E,addScrollableSelector:G,removeScrollableSelector:M,addScrollableTarget:q,removeScrollableTarget:x,addLockableSelector:W,addLockableTarget:F,addFillGapSelector:Y,removeFillGapSelector:N,addFillGapTarget:P,removeFillGapTarget:j,setFillGapMethod:O,refillGaps:B,_state:A},J);t.default=Z}],n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===_typeof(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0).default;function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,o},e.exports=r()}),l=(t=n)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function a(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function r(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.container=e,this.triggerBtn=this.container.querySelector("[data-test-api]"),this.requestResult=this.container.querySelector("[data-test-result]"),this.requestUrl=this.triggerBtn.dataset.testApi,this.triggerBtn.addEventListener("click",function(e){t.requestResponse()})}var e,t,o;return e=r,(t=[{key:"requestResponse",value:function(){var t=this;fetch(this.requestUrl).then(function(e){return e.json()}).then(function(e){e&&(t.requestResult.innerHTML=e.title+e.message)})}}])&&a(e.prototype,t),o&&a(e,o),r}();function c(a){var e=document.querySelector("[data-countdow]"),i=e.querySelector("[data-countdow-days]"),c=e.querySelector("[data-countdow-hours]"),u=e.querySelector("[data-countdow-minutes]");function t(){var e,t,r,o,n,l=(e=a,t=Date.parse(e)-Date.parse(new Date),r=Math.floor(t/1e3/60%60),o=Math.floor(t/36e5%24),n=Math.floor(t/864e5),{total:t,days:n,hours:o,minutes:r});i.innerHTML=l.days,c.innerHTML=("0"+l.hours).slice(-2),u.innerHTML=("0"+l.minutes).slice(-2),l.total<=0&&clearInterval(s)}t();var s=setInterval(t,1e3)}function u(e){({control:e.querySelector("[".concat("data-btn-going","]"))}).control.addEventListener("click",function(e){e.preventDefault()})}function s(r){r.addEventListener("click",function(e){e.preventDefault();var t=r.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})})}r();var d=".js-scroll-animation";window.app={header:null,scroll:{disable:l.disablePageScroll,enable:l.enablePageScroll},setInert:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){e.setAttribute("inert",!0)})},removeInert:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){e.removeAttribute("inert")})},initModule:function(t,e){e?Array.prototype.slice.call(document.querySelectorAll(e)).forEach(function(e){new t(e)}):new t},init:function(){app.initModule(i,".js-test-api"),app.initModule(u,".js-invitation"),function(){var r="is-open",o=location.search.split("?=")[1],n=document.querySelector(".js-invitation"),t=n.querySelector("[data-invitation-confirmation]"),e=t.querySelectorAll("[data-btn-going]"),l=n.querySelector("[data-invitation-form]");e.forEach(function(e){e.addEventListener("click",function(){"true"===e.dataset.btnGoing?(db.collection("users").doc(o).update({Coming:!0}),t.classList.remove(r),l.classList.add(r)):"false"===e.dataset.btnGoing&&(db.collection("users").doc(o).update({Coming:!1}),t.classList.remove(r))})});var a=document.querySelector("[data-header-invitation-text]");db.collection("users").get().then(function(e){e.forEach(function(e){if(e.id===o){var t=e.data();a.innerText="".concat(t.Name," ").concat(t.LastName," вы приглашены на свадьбу"),t.Coming||n.classList.add(r)}})}),l.addEventListener("submit",function(e){e.preventDefault(),db.collection("users").doc(o).update({Persons:l.persons.value}),n.classList.remove(r)})}();c("2021-08-07"),app.initModule(s,d)}},window.addEventListener("DOMContentLoaded",app.init)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwid2luZG93IiwiZ2xvYmFsIiwic2VsZiIsImNyZWF0ZUNvbW1vbmpzTW9kdWxlIiwiZm4iLCJtb2R1bGUiLCJleHBvcnRzIiwieCIsInN2ZzRldmVyeWJvZHkiLCJyb290IiwiZW1iZWQiLCJwYXJlbnQiLCJzdmciLCJ0YXJnZXQiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInZpZXdCb3giLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjbG9uZSIsImNsb25lTm9kZSIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJsb2FkcmVhZHlzdGF0ZWNoYW5nZSIsInhociIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJjYWNoZWREb2N1bWVudCIsIl9jYWNoZWREb2N1bWVudCIsImltcGxlbWVudGF0aW9uIiwiY3JlYXRlSFRNTERvY3VtZW50IiwiYm9keSIsImlubmVySFRNTCIsInJlc3BvbnNlVGV4dCIsIl9jYWNoZWRUYXJnZXQiLCJfZW1iZWRzIiwic3BsaWNlIiwibWFwIiwiaXRlbSIsImlkIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRTVkdBbmNlc3RvciIsIm5vZGUiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsInJhd29wdHMiLCJwb2x5ZmlsbCIsIm9wdHMiLCJPYmplY3QiLCJpbklmcmFtZSIsInRvcCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsInJlcXVlc3RzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2V0VGltZW91dCIsInVzZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm51bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcyIsIm9uaW50ZXJ2YWwiLCJpbmRleCIsInVzZSIsInNyYyIsImF0dHJpYnV0ZU5hbWUiLCJ2YWxpZGF0ZSIsInJlbW92ZUNoaWxkIiwic3JjU3BsaXQiLCJzcGxpdCIsInVybCIsInNoaWZ0Iiwiam9pbiIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJwdXNoIiwic2Nyb2xsTG9jayIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibSIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiciIsImFyZ3VtZW50QXNBcnJheSIsImFyZ3VtZW50IiwiQXJyYXkiLCJpc0FycmF5IiwiaXNFbGVtZW50IiwiTm9kZSIsImVhY2hOb2RlIiwibm9kZUxpc3QiLCJjYWxsYmFjayIsIk5vZGVMaXN0IiwiaSIsInRocm93RXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsImVycm9yIiwiY29uY2F0IiwiYXJyYXlBc1NlbGVjdG9yIiwiYXJyYXkiLCJub2RlTGlzdEFzQXJyYXkiLCJub2RlcyIsImZpbmRQYXJlbnRCeVNlbGVjdG9yIiwiJGVsIiwic2VsZWN0b3IiLCIkcm9vdCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbmRleE9mIiwicGFyZW50RWxlbWVudCIsImVsZW1lbnRIYXNTZWxlY3RvciIsImVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbiIsImdldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvdyIsImVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0Iiwic2Nyb2xsVG9wIiwiZWxlbWVudFNjcm9sbFRvcE9uRW5kIiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiZWxlbWVudFNjcm9sbExlZnRPblN0YXJ0Iiwic2Nyb2xsTGVmdCIsImVsZW1lbnRTY3JvbGxMZWZ0T25FbmQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwiX2RlZmluZVByb3BlcnR5Iiwia2V5IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImQiLCJkaXNhYmxlUGFnZVNjcm9sbCIsImVuYWJsZVBhZ2VTY3JvbGwiLCJnZXRTY3JvbGxTdGF0ZSIsImNsZWFyUXVldWVTY3JvbGxMb2NrcyIsInNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoIiwic2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoIiwiZ2V0UGFnZVNjcm9sbEJhcldpZHRoIiwiZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCIsInNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQiLCJzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfc2V0RmlsbEdhcE1ldGhvZCIsInNjcm9sbF9sb2NrX2FkZEZpbGxHYXBUYXJnZXQiLCJzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0Iiwic2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yIiwicmVmaWxsR2FwcyIsIkZJTExfR0FQX0FWQUlMQUJMRV9NRVRIT0RTIiwic3RhdGUiLCJzY3JvbGwiLCJxdWV1ZSIsInNjcm9sbGFibGVTZWxlY3RvcnMiLCJsb2NrYWJsZVNlbGVjdG9ycyIsImZpbGxHYXBTZWxlY3RvcnMiLCJmaWxsR2FwTWV0aG9kIiwic3RhcnRUb3VjaFkiLCJzdGFydFRvdWNoWCIsInNjcm9sbF9sb2NrX2hpZGVMb2NrYWJsZU92ZXJmbG93IiwiZmlsbEdhcHMiLCJzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvdyIsInVuZmlsbEdhcHMiLCIkdGFyZ2V0Iiwib25seUV4aXN0cyIsImN1cnJlbnRPdmVyZmxvd1lQcm9wZXJ0eSIsInN0eWxlIiwib3ZlcmZsb3dZIiwid2lkdGgiLCJkb2N1bWVudFdpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJpbm5lcldpZHRoIiwiYm9yZGVyTGVmdFdpZHRoQ3VycmVudFByb3BlcnR5IiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eSIsImJvcmRlclJpZ2h0V2lkdGgiLCJfY3VycmVudFdpZHRoIiwiJHRhcmdldHMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmaWx0ZXIiLCJzU2VsZWN0b3IiLCJtZXRob2QiLCJtZXRob2RzIiwic2Nyb2xsX2xvY2tfZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFRhcmdldCIsInNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvciIsImZTZWxlY3RvciIsInNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yIiwic2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3dTZWxlY3RvciIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IiLCJzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCIsInNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0IiwiY29tcHV0ZWRTdHlsZSIsImlzTG9ja2FibGUiLCJzY3JvbGxCYXJXaWR0aCIsIiRsb2NrYWJsZVBhcmVudCIsImN1cnJlbnRNYXJnaW4iLCJwYXJzZUZsb2F0IiwibWFyZ2luUmlnaHQiLCJtYXhXaWR0aCIsImN1cnJlbnRQYWRkaW5nIiwicGFkZGluZ1JpZ2h0IiwiY3VycmVudEZpbGxHYXBNZXRob2QiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRvdWNoZXMiLCJjbGllbnRZIiwiY2xpZW50WCIsImN1cnJlbnRDbGllbnRZIiwiY3VycmVudENsaWVudFgiLCJkaXJlY3Rpb24iLCJkaXJlY3Rpb25XaXRoT2Zmc2V0IiwiaGFuZGxlIiwic2tpcCIsInBhcmVudFNjcm9sbGFibGVFbCIsInByZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBhc3NpdmUiLCJkZXByZWNhdGVkTWV0aG9kcyIsImhpZGUiLCJzaG93IiwidG9nZ2xlIiwiZ2V0U3RhdGUiLCJnZXRXaWR0aCIsImdldEN1cnJlbnRXaWR0aCIsInNldFNjcm9sbGFibGVUYXJnZXRzIiwic2V0RmlsbEdhcFNlbGVjdG9ycyIsInNldEZpbGxHYXBUYXJnZXRzIiwiY2xlYXJRdWV1ZSIsInNvdXJjZSIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZm9yRWFjaCIsIl9vYmplY3RTcHJlYWQiLCJnZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCIsImdldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCIsImFkZFNjcm9sbGFibGVTZWxlY3RvciIsInJlbW92ZVNjcm9sbGFibGVTZWxlY3RvciIsImFkZFNjcm9sbGFibGVUYXJnZXQiLCJyZW1vdmVTY3JvbGxhYmxlVGFyZ2V0IiwiYWRkTG9ja2FibGVTZWxlY3RvciIsImFkZExvY2thYmxlVGFyZ2V0IiwiYWRkRmlsbEdhcFNlbGVjdG9yIiwicmVtb3ZlRmlsbEdhcFNlbGVjdG9yIiwiYWRkRmlsbEdhcFRhcmdldCIsInJlbW92ZUZpbGxHYXBUYXJnZXQiLCJzZXRGaWxsR2FwTWV0aG9kIiwiX3N0YXRlIiwiYyIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZ2V0IiwidG9TdHJpbmdUYWciLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwicyIsIm1vZHVsZUlkIiwibCIsInNjcm9sbExvY2skMSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwidGVzdEFwaSIsImNvbnRhaW5lciIsIl90aGlzIiwidGhpcyIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0cmlnZ2VyQnRuIiwicXVlcnlTZWxlY3RvciIsInJlcXVlc3RSZXN1bHQiLCJyZXF1ZXN0VXJsIiwiZGF0YXNldCIsImV2dCIsInJlcXVlc3RSZXNwb25zZSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl90aGlzMiIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJ0aXRsZSIsImluaXRpYWxpemVDbG9jayIsImVuZHRpbWUiLCJjbG9jayIsImRheXNTcGFuIiwiaG91cnNTcGFuIiwibWludXRlc1NwYW4iLCJ1cGRhdGVDbG9jayIsInRvdGFsIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsIkRhdGUiLCJwYXJzZSIsIk1hdGgiLCJmbG9vciIsInNsaWNlIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVJbnRlcnZhbCIsInNldEludGVydmFsIiwiaW52aXRhdGlvbiIsImNvbnRyb2wiLCJldmVudCIsIlNjcm9sbEFuaW1hdGlvbiIsImJsb2NrSUQiLCJzdWJzdHIiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJzZWxlY3RvcnMiLCJhcHAiLCJoZWFkZXIiLCJkaXNhYmxlIiwiZW5hYmxlIiwic2V0SW5lcnQiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJyZW1vdmVJbmVydCIsIl9sZW4yIiwiX2tleTIiLCJpbml0TW9kdWxlIiwiTW9kdWxlIiwiaW5pdCIsImNvbmZpZyIsImxvY2F0aW9uIiwic2VhcmNoIiwiY29uZmlybWF0aW9uIiwiYnV0dG9ucyIsImZvcm0iLCJidG4iLCJidG5Hb2luZyIsImRiIiwiY29sbGVjdGlvbiIsImRvYyIsInVwZGF0ZSIsIkNvbWluZyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImhlYWRlclRleHQiLCJxdWVyeVNuYXBzaG90IiwiaW5uZXJUZXh0IiwiTmFtZSIsIkxhc3ROYW1lIiwiUGVyc29ucyIsInBlcnNvbnMiLCJmaXJlYmFzZUxvZ2ljIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLFNBQVNBLFFBQVFDLEdBQW1WLE9BQXRPRCxRQUFyRCxtQkFBWEUsUUFBb0QsaUJBQXBCQSxPQUFPQyxTQUFtQyxTQUFpQkYsR0FBTyxjQUFjQSxHQUEyQixTQUFpQkEsR0FBTyxPQUFPQSxHQUF5QixtQkFBWEMsUUFBeUJELEVBQUlHLGNBQWdCRixRQUFVRCxJQUFRQyxPQUFPRyxVQUFZLGdCQUFrQkosSUFBeUJBLElBRW5YLFNBQVdLLEdBQ1MsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPLFVBQVdELEdBQVdBLElBRDVFLENBRUcsV0FHRCxJQUFJRyxFQUF1QyxvQkFBZkMsV0FBNkJBLFdBQStCLG9CQUFYQyxPQUF5QkEsT0FBMkIsb0JBQVhDLE9BQXlCQSxPQUF5QixvQkFBVEMsS0FBdUJBLEtBQU8sR0FNN0wsU0FBU0MsRUFBcUJDLEVBQUlDLEdBQ2hDLE9BRUdELEVBRklDLEVBQVMsQ0FDZEMsUUFBUyxJQUNHRCxFQUFPQyxTQUFVRCxFQUFPQyxRQUd4QyxJQVZ1QkMsRUFVbkJDLEVBQWdCTCxFQUFxQixTQUFVRSxHQUNoRCxJQUFVSSxFQUFNZCxFQUFOYyxFQUtUWCxFQUxlSCxFQUtDLFdBRWhCLFNBQVNlLEVBQU1DLEVBQVFDLEVBQUtDLEdBRTFCLEdBQUlBLEVBQVEsQ0FFVixJQUFJQyxFQUFXQyxTQUFTQyx5QkFDcEJDLEdBQVdMLEVBQUlNLGFBQWEsWUFBY0wsRUFBT00sYUFBYSxXQUVsRUYsR0FBV0wsRUFBSVEsYUFBYSxVQUFXSCxHQUV2QyxJQUNBLElBQUlJLEVBQVFSLEVBQU9TLFdBQVUsR0FBS0QsRUFBTUUsV0FBV0MsUUFDakRWLEVBQVNXLFlBQVlKLEVBQU1LLFlBSTdCZixFQUFPYyxZQUFZWCxJQUl2QixTQUFTYSxFQUFx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UThELFVBQ2RDLEdBQUdDLFdBQVcsU0FBU0MsSUFBSWxVLEdBQUltVSxPQUFPLENBQ3BDQyxRQUFRLElBRVZULEVBQWFVLFVBQVVDLE9BQU9kLEdBQzlCSyxFQUFLUSxVQUFVRSxJQUFJZixJQUNlLFVBQXpCTSxFQUFJN0QsUUFBUThELFdBQ3JCQyxHQUFHQyxXQUFXLFNBQVNDLElBQUlsVSxHQUFJbVUsT0FBTyxDQUNwQ0MsUUFBUSxJQUVWVCxFQUFhVSxVQUFVQyxPQUFPZCxRQUlwQyxJQUFJZ0IsRUFBYXBXLFNBQVMwUixjQUFjLGlDQUN4Q2tFLEdBQUdDLFdBQVcsU0FBU2pHLE1BQU13QyxLQUFLLFNBQVVpRSxHQUMxQ0EsRUFBYzdILFFBQVEsU0FBVXNILEdBQzlCLEdBQUlBLEVBQUlsVSxLQUFPQSxFQUFJLENBQ2pCLElBQUkyUSxFQUFPdUQsRUFBSXZELE9BQ2Y2RCxFQUFXRSxVQUFZLEdBQUc3USxPQUFPOE0sRUFBS2dFLEtBQU0sS0FBSzlRLE9BQU84TSxFQUFLaUUsU0FBVSw2QkFDdEVqRSxFQUFLeUQsUUFBU3BDLEVBQVdxQyxVQUFVRSxJQUFJZixRQUk5Q0ssRUFBS2pKLGlCQUFpQixTQUFVLFNBQVVDLEdBQ3hDQSxFQUFFWSxpQkFDRnVJLEdBQUdDLFdBQVcsU0FBU0MsSUFBSWxVLEdBQUltVSxPQUFPLENBQ3BDVSxRQUFTaEIsRUFBS2lCLFFBQVFuUCxRQUV4QnFNLEVBQVdxQyxVQUFVQyxPQUFPZCxLQXNHNUJ1QixHQUVBbEUsRUFEZSxjQUVmNkIsSUFBSVcsV0FBV2xCLEVBQWlCTSxLQUdwQ3BWLE9BQU91TixpQkFBaUIsbUJBQW9COEgsSUFBSWEiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoJ3NjcmlwdHMnLCBmYWN0b3J5KSA6IGZhY3RvcnkoKTtcbn0pKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG4gIGZ1bmN0aW9uIHVud3JhcEV4cG9ydHMoeCkge1xuICAgIHJldHVybiB4ICYmIHguX19lc01vZHVsZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgJ2RlZmF1bHQnKSA/IHhbJ2RlZmF1bHQnXSA6IHg7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7XG4gICAgcmV0dXJuIG1vZHVsZSA9IHtcbiAgICAgIGV4cG9ydHM6IHt9XG4gICAgfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xuICB9XG5cbiAgdmFyIHN2ZzRldmVyeWJvZHkgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgIWZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA/IC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6IHJvb3Quc3ZnNGV2ZXJ5Ym9keSA9IGZhY3RvcnkoKTtcbiAgICB9KGNvbW1vbmpzR2xvYmFsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvKiEgc3ZnNGV2ZXJ5Ym9keSB2Mi4xLjkgfCBnaXRodWIuY29tL2pvbmF0aGFudG5lYWwvc3ZnNGV2ZXJ5Ym9keSAqL1xuICAgICAgZnVuY3Rpb24gZW1iZWQocGFyZW50LCBzdmcsIHRhcmdldCkge1xuICAgICAgICAvLyBpZiB0aGUgdGFyZ2V0IGV4aXN0c1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgLy8gY3JlYXRlIGEgZG9jdW1lbnQgZnJhZ21lbnQgdG8gaG9sZCB0aGUgY29udGVudHMgb2YgdGhlIHRhcmdldFxuICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgICAgICAgICAgdmlld0JveCA9ICFzdmcuaGFzQXR0cmlidXRlKFwidmlld0JveFwiKSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwidmlld0JveFwiKTsgLy8gY29uZGl0aW9uYWxseSBzZXQgdGhlIHZpZXdCb3ggb24gdGhlIHN2Z1xuXG4gICAgICAgICAgdmlld0JveCAmJiBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCB2aWV3Qm94KTsgLy8gY29weSB0aGUgY29udGVudHMgb2YgdGhlIGNsb25lIGludG8gdGhlIGZyYWdtZW50XG5cbiAgICAgICAgICBmb3IgKCAvLyBjbG9uZSB0aGUgdGFyZ2V0XG4gICAgICAgICAgdmFyIGNsb25lID0gdGFyZ2V0LmNsb25lTm9kZSghMCk7IGNsb25lLmNoaWxkTm9kZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2xvbmUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgfSAvLyBhcHBlbmQgdGhlIGZyYWdtZW50IGludG8gdGhlIHN2Z1xuXG5cbiAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGxvYWRyZWFkeXN0YXRlY2hhbmdlKHhocikge1xuICAgICAgICAvLyBsaXN0ZW4gdG8gY2hhbmdlcyBpbiB0aGUgcmVxdWVzdFxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGlmIHRoZSByZXF1ZXN0IGlzIHJlYWR5XG4gICAgICAgICAgaWYgKDQgPT09IHhoci5yZWFkeVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGNhY2hlZCBodG1sIGRvY3VtZW50XG4gICAgICAgICAgICB2YXIgY2FjaGVkRG9jdW1lbnQgPSB4aHIuX2NhY2hlZERvY3VtZW50OyAvLyBlbnN1cmUgdGhlIGNhY2hlZCBodG1sIGRvY3VtZW50IGJhc2VkIG9uIHRoZSB4aHIgcmVzcG9uc2VcblxuICAgICAgICAgICAgY2FjaGVkRG9jdW1lbnQgfHwgKGNhY2hlZERvY3VtZW50ID0geGhyLl9jYWNoZWREb2N1bWVudCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSwgY2FjaGVkRG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2VUZXh0LCB4aHIuX2NhY2hlZFRhcmdldCA9IHt9KSwgLy8gY2xlYXIgdGhlIHhociBlbWJlZHMgbGlzdCBhbmQgZW1iZWQgZWFjaCBpdGVtXG4gICAgICAgICAgICB4aHIuX2VtYmVkcy5zcGxpY2UoMCkubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgIC8vIGdldCB0aGUgY2FjaGVkIHRhcmdldFxuICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0geGhyLl9jYWNoZWRUYXJnZXRbaXRlbS5pZF07IC8vIGVuc3VyZSB0aGUgY2FjaGVkIHRhcmdldFxuXG4gICAgICAgICAgICAgIHRhcmdldCB8fCAodGFyZ2V0ID0geGhyLl9jYWNoZWRUYXJnZXRbaXRlbS5pZF0gPSBjYWNoZWREb2N1bWVudC5nZXRFbGVtZW50QnlJZChpdGVtLmlkKSksIC8vIGVtYmVkIHRoZSB0YXJnZXQgaW50byB0aGUgc3ZnXG4gICAgICAgICAgICAgIGVtYmVkKGl0ZW0ucGFyZW50LCBpdGVtLnN2ZywgdGFyZ2V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgLy8gdGVzdCB0aGUgcmVhZHkgc3RhdGUgY2hhbmdlIGltbWVkaWF0ZWx5XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc3ZnNGV2ZXJ5Ym9keShyYXdvcHRzKSB7XG4gICAgICAgIGZ1bmN0aW9uIG9uaW50ZXJ2YWwoKSB7XG4gICAgICAgICAgLy8gd2hpbGUgdGhlIGluZGV4IGV4aXN0cyBpbiB0aGUgbGl2ZSA8dXNlPiBjb2xsZWN0aW9uXG4gICAgICAgICAgZm9yICggLy8gZ2V0IHRoZSBjYWNoZWQgPHVzZT4gaW5kZXhcbiAgICAgICAgICB2YXIgaW5kZXggPSAwOyBpbmRleCA8IHVzZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBjdXJyZW50IDx1c2U+XG4gICAgICAgICAgICB2YXIgdXNlID0gdXNlc1tpbmRleF0sXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gdXNlLnBhcmVudE5vZGUsXG4gICAgICAgICAgICAgICAgc3ZnID0gZ2V0U1ZHQW5jZXN0b3IocGFyZW50KSxcbiAgICAgICAgICAgICAgICBzcmMgPSB1c2UuZ2V0QXR0cmlidXRlKFwieGxpbms6aHJlZlwiKSB8fCB1c2UuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcblxuICAgICAgICAgICAgaWYgKCFzcmMgJiYgb3B0cy5hdHRyaWJ1dGVOYW1lICYmIChzcmMgPSB1c2UuZ2V0QXR0cmlidXRlKG9wdHMuYXR0cmlidXRlTmFtZSkpLCBzdmcgJiYgc3JjKSB7XG4gICAgICAgICAgICAgIGlmIChwb2x5ZmlsbCkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0cy52YWxpZGF0ZSB8fCBvcHRzLnZhbGlkYXRlKHNyYywgc3ZnLCB1c2UpKSB7XG4gICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIDx1c2U+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZCh1c2UpOyAvLyBwYXJzZSB0aGUgc3JjIGFuZCBnZXQgdGhlIHVybCBhbmQgaWRcblxuICAgICAgICAgICAgICAgICAgdmFyIHNyY1NwbGl0ID0gc3JjLnNwbGl0KFwiI1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBzcmNTcGxpdC5zaGlmdCgpLFxuICAgICAgICAgICAgICAgICAgICAgIGlkID0gc3JjU3BsaXQuam9pbihcIiNcIik7IC8vIGlmIHRoZSBsaW5rIGlzIGV4dGVybmFsXG5cbiAgICAgICAgICAgICAgICAgIGlmICh1cmwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgY2FjaGVkIHhociByZXF1ZXN0XG4gICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSByZXF1ZXN0c1t1cmxdOyAvLyBlbnN1cmUgdGhlIHhociByZXF1ZXN0IGV4aXN0c1xuXG4gICAgICAgICAgICAgICAgICAgIHhociB8fCAoeGhyID0gcmVxdWVzdHNbdXJsXSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLCB4aHIub3BlbihcIkdFVFwiLCB1cmwpLCB4aHIuc2VuZCgpLCB4aHIuX2VtYmVkcyA9IFtdKSwgLy8gYWRkIHRoZSBzdmcgYW5kIGlkIGFzIGFuIGl0ZW0gdG8gdGhlIHhociBlbWJlZHMgbGlzdFxuICAgICAgICAgICAgICAgICAgICB4aHIuX2VtYmVkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IHBhcmVudCxcbiAgICAgICAgICAgICAgICAgICAgICBzdmc6IHN2ZyxcbiAgICAgICAgICAgICAgICAgICAgICBpZDogaWRcbiAgICAgICAgICAgICAgICAgICAgfSksIC8vIHByZXBhcmUgdGhlIHhociByZWFkeSBzdGF0ZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgbG9hZHJlYWR5c3RhdGVjaGFuZ2UoeGhyKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVtYmVkIHRoZSBsb2NhbCBpZCBpbnRvIHRoZSBzdmdcbiAgICAgICAgICAgICAgICAgICAgZW1iZWQocGFyZW50LCBzdmcsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBpbmRleCB3aGVuIHRoZSBwcmV2aW91cyB2YWx1ZSB3YXMgbm90IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgKytpbmRleCwgKytudW1iZXJPZlN2Z1VzZUVsZW1lbnRzVG9CeXBhc3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBpbmNyZWFzZSB0aGUgaW5kZXggd2hlbiB0aGUgcHJldmlvdXMgdmFsdWUgd2FzIG5vdCBcInZhbGlkXCJcbiAgICAgICAgICAgICAgKytpbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIGNvbnRpbnVlIHRoZSBpbnRlcnZhbFxuXG5cbiAgICAgICAgICAoIXVzZXMubGVuZ3RoIHx8IHVzZXMubGVuZ3RoIC0gbnVtYmVyT2ZTdmdVc2VFbGVtZW50c1RvQnlwYXNzID4gMCkgJiYgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG9uaW50ZXJ2YWwsIDY3KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwb2x5ZmlsbCxcbiAgICAgICAgICAgIG9wdHMgPSBPYmplY3QocmF3b3B0cyksXG4gICAgICAgICAgICBuZXdlcklFVUEgPSAvXFxiVHJpZGVudFxcL1s1NjddXFxifFxcYk1TSUUgKD86OXwxMClcXC4wXFxiLyxcbiAgICAgICAgICAgIHdlYmtpdFVBID0gL1xcYkFwcGxlV2ViS2l0XFwvKFxcZCspXFxiLyxcbiAgICAgICAgICAgIG9sZGVyRWRnZVVBID0gL1xcYkVkZ2VcXC8xMlxcLihcXGQrKVxcYi8sXG4gICAgICAgICAgICBlZGdlVUEgPSAvXFxiRWRnZVxcLy4oXFxkKylcXGIvLFxuICAgICAgICAgICAgaW5JZnJhbWUgPSB3aW5kb3cudG9wICE9PSB3aW5kb3cuc2VsZjtcbiAgICAgICAgcG9seWZpbGwgPSBcInBvbHlmaWxsXCIgaW4gb3B0cyA/IG9wdHMucG9seWZpbGwgOiBuZXdlcklFVUEudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChvbGRlckVkZ2VVQSkgfHwgW10pWzFdIDwgMTA1NDcgfHwgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2god2Via2l0VUEpIHx8IFtdKVsxXSA8IDUzNyB8fCBlZGdlVUEudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiBpbklmcmFtZTsgLy8gY3JlYXRlIHhociByZXF1ZXN0cyBvYmplY3RcblxuICAgICAgICB2YXIgcmVxdWVzdHMgPSB7fSxcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgc2V0VGltZW91dCxcbiAgICAgICAgICAgIHVzZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInVzZVwiKSxcbiAgICAgICAgICAgIG51bWJlck9mU3ZnVXNlRWxlbWVudHNUb0J5cGFzcyA9IDA7IC8vIGNvbmRpdGlvbmFsbHkgc3RhcnQgdGhlIGludGVydmFsIGlmIHRoZSBwb2x5ZmlsbCBpcyBhY3RpdmVcblxuICAgICAgICBwb2x5ZmlsbCAmJiBvbmludGVydmFsKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldFNWR0FuY2VzdG9yKG5vZGUpIHtcbiAgICAgICAgZm9yICh2YXIgc3ZnID0gbm9kZTsgXCJzdmdcIiAhPT0gc3ZnLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgJiYgKHN2ZyA9IHN2Zy5wYXJlbnROb2RlKTspIHt9XG5cbiAgICAgICAgcmV0dXJuIHN2ZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN2ZzRldmVyeWJvZHk7XG4gICAgfSk7XG4gIH0pO1xuICB2YXIgc2Nyb2xsTG9jayA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSkoY29tbW9uanNHbG9iYWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKioqKiovXG4gICAgICAgIGZ1bmN0aW9uIChtb2R1bGVzKSB7XG4gICAgICAgICAgLy8gd2VicGFja0Jvb3RzdHJhcFxuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBUaGUgbW9kdWxlIGNhY2hlXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cblxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICBmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICBpZiAoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblxuICAgICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIGk6IG1vZHVsZUlkLFxuXG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIGw6IGZhbHNlLFxuXG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblxuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgbW9kdWxlLmwgPSB0cnVlO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgfVxuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuXG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24gKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIGlmICghX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXQ6IGdldHRlclxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcblxuICAgICAgICAgIC8qKioqKiovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6ICdNb2R1bGUnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgfTtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24gKHZhbHVlLCBtb2RlKSB7XG4gICAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgICAgaWYgKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgaWYgKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBpZiAobW9kZSAmIDQgJiYgX3R5cGVvZih2YWx1ZSkgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0Jywge1xuICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgaWYgKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlW2tleV07XG4gICAgICAgICAgICAgIH0uYmluZChudWxsLCBrZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAgIHJldHVybiBucztcbiAgICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgfTtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTtcbiAgICAgICAgICAgIH0gOlxuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7XG4gICAgICAgICAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuICAgICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgICByZXR1cm4gZ2V0dGVyO1xuICAgICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICB9O1xuICAgICAgICAgIC8qKioqKiovXG5cbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24gKG9iamVjdCwgcHJvcGVydHkpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgICAvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuXG4gICAgICAgICAgLyoqKioqKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgLyoqKioqKi9cblxuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5cbiAgICAgICAgICAvKioqKioqL1xuXG4gICAgICAgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgfShcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAvKioqKioqL1xuICAgICAgICBbXG4gICAgICAgIC8qIDAgKi9cblxuICAgICAgICAvKioqL1xuICAgICAgICBmdW5jdGlvbiAobW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pOyAvLyBDT05DQVRFTkFURUQgTU9EVUxFOiAuL3NyYy90b29scy5qc1xuXG5cbiAgICAgICAgICB2YXIgYXJndW1lbnRBc0FycmF5ID0gZnVuY3Rpb24gYXJndW1lbnRBc0FycmF5KGFyZ3VtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmd1bWVudCkgPyBhcmd1bWVudCA6IFthcmd1bWVudF07XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBpc0VsZW1lbnQgPSBmdW5jdGlvbiBpc0VsZW1lbnQodGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0IGluc3RhbmNlb2YgTm9kZTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGlzRWxlbWVudExpc3QgPSBmdW5jdGlvbiBpc0VsZW1lbnRMaXN0KG5vZGVMaXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZUxpc3QgaW5zdGFuY2VvZiBOb2RlTGlzdDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVhY2hOb2RlID0gZnVuY3Rpb24gZWFjaE5vZGUobm9kZUxpc3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBpZiAobm9kZUxpc3QgJiYgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgbm9kZUxpc3QgPSBpc0VsZW1lbnRMaXN0KG5vZGVMaXN0KSA/IG5vZGVMaXN0IDogW25vZGVMaXN0XTtcblxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKG5vZGVMaXN0W2ldLCBpLCBub2RlTGlzdC5sZW5ndGgpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHRocm93RXJyb3IgPSBmdW5jdGlvbiB0aHJvd0Vycm9yKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiW3Njcm9sbC1sb2NrXSBcIi5jb25jYXQobWVzc2FnZSkpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgYXJyYXlBc1NlbGVjdG9yID0gZnVuY3Rpb24gYXJyYXlBc1NlbGVjdG9yKGFycmF5KSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJheSkpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gYXJyYXkuam9pbignLCAnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgbm9kZUxpc3RBc0FycmF5ID0gZnVuY3Rpb24gbm9kZUxpc3RBc0FycmF5KG5vZGVMaXN0KSB7XG4gICAgICAgICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgICAgICAgIGVhY2hOb2RlKG5vZGVMaXN0LCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZmluZFBhcmVudEJ5U2VsZWN0b3IgPSBmdW5jdGlvbiBmaW5kUGFyZW50QnlTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTtcbiAgICAgICAgICAgIHZhciAkcm9vdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZG9jdW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmICYmIG5vZGVMaXN0QXNBcnJheSgkcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkuaW5kZXhPZigkZWwpICE9PSAtMSkge1xuICAgICAgICAgICAgICByZXR1cm4gJGVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aGlsZSAoKCRlbCA9ICRlbC5wYXJlbnRFbGVtZW50KSAmJiBub2RlTGlzdEFzQXJyYXkoJHJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmluZGV4T2YoJGVsKSA9PT0gLTEpIHt9XG5cbiAgICAgICAgICAgIHJldHVybiAkZWw7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50SGFzU2VsZWN0b3IgPSBmdW5jdGlvbiBlbGVtZW50SGFzU2VsZWN0b3IoJGVsLCBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICRyb290ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBkb2N1bWVudDtcbiAgICAgICAgICAgIHZhciBoYXMgPSBub2RlTGlzdEFzQXJyYXkoJHJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpLmluZGV4T2YoJGVsKSAhPT0gLTE7XG4gICAgICAgICAgICByZXR1cm4gaGFzO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudEhhc092ZXJmbG93SGlkZGVuID0gZnVuY3Rpb24gZWxlbWVudEhhc092ZXJmbG93SGlkZGVuKCRlbCkge1xuICAgICAgICAgICAgaWYgKCRlbCkge1xuICAgICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoJGVsKTtcbiAgICAgICAgICAgICAgdmFyIG92ZXJmbG93SXNIaWRkZW4gPSBjb21wdXRlZFN0eWxlLm92ZXJmbG93ID09PSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgcmV0dXJuIG92ZXJmbG93SXNIaWRkZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50U2Nyb2xsVG9wT25TdGFydCA9IGZ1bmN0aW9uIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0KCRlbCkge1xuICAgICAgICAgICAgaWYgKCRlbCkge1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudEhhc092ZXJmbG93SGlkZGVuKCRlbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAkZWwuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsVG9wIDw9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBlbGVtZW50U2Nyb2xsVG9wT25FbmQgPSBmdW5jdGlvbiBlbGVtZW50U2Nyb2xsVG9wT25FbmQoJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICRlbC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSAkZWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wV2l0aEhlaWdodCA9IHNjcm9sbFRvcCArICRlbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxUb3BXaXRoSGVpZ2h0ID49IHNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCA9IGZ1bmN0aW9uIGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCgkZWwpIHtcbiAgICAgICAgICAgIGlmICgkZWwpIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRIYXNPdmVyZmxvd0hpZGRlbigkZWwpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9ICRlbC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsTGVmdCA8PSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudFNjcm9sbExlZnRPbkVuZCA9IGZ1bmN0aW9uIGVsZW1lbnRTY3JvbGxMZWZ0T25FbmQoJGVsKSB7XG4gICAgICAgICAgICBpZiAoJGVsKSB7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50SGFzT3ZlcmZsb3dIaWRkZW4oJGVsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSAkZWwuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbFdpZHRoID0gJGVsLnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdFdpdGhXaWR0aCA9IHNjcm9sbExlZnQgKyAkZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgIHJldHVybiBzY3JvbGxMZWZ0V2l0aFdpZHRoID49IHNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudElzU2Nyb2xsYWJsZUZpZWxkID0gZnVuY3Rpb24gZWxlbWVudElzU2Nyb2xsYWJsZUZpZWxkKCRlbCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJ3RleHRhcmVhLCBbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSc7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudEhhc1NlbGVjdG9yKCRlbCwgc2VsZWN0b3IpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZWxlbWVudElzSW5wdXRSYW5nZSA9IGZ1bmN0aW9uIGVsZW1lbnRJc0lucHV0UmFuZ2UoJGVsKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT1cInJhbmdlXCJdJztcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50SGFzU2VsZWN0b3IoJGVsLCBzZWxlY3Rvcik7XG4gICAgICAgICAgfTsgLy8gQ09OQ0FURU5BVEVEIE1PRFVMRTogLi9zcmMvc2Nyb2xsLWxvY2suanNcblxuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkaXNhYmxlUGFnZVNjcm9sbFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlzYWJsZVBhZ2VTY3JvbGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImVuYWJsZVBhZ2VTY3JvbGxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVuYWJsZVBhZ2VTY3JvbGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFNjcm9sbFN0YXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRTY3JvbGxTdGF0ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiY2xlYXJRdWV1ZVNjcm9sbExvY2tzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGVhclF1ZXVlU2Nyb2xsTG9ja3M7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFRhcmdldFNjcm9sbEJhcldpZHRoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19nZXRUYXJnZXRTY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19nZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGg7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFBhZ2VTY3JvbGxCYXJXaWR0aFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0UGFnZVNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRDdXJyZW50UGFnZVNjcm9sbEJhcldpZHRoXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRDdXJyZW50UGFnZVNjcm9sbEJhcldpZHRoO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRTY3JvbGxhYmxlVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVTY3JvbGxhYmxlVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRTY3JvbGxhYmxlU2VsZWN0b3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3I7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZExvY2thYmxlVGFyZ2V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVRhcmdldDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkTG9ja2FibGVTZWxlY3RvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVTZWxlY3RvcjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic2V0RmlsbEdhcE1ldGhvZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfc2V0RmlsbEdhcE1ldGhvZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkRmlsbEdhcFRhcmdldFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlRmlsbEdhcFRhcmdldFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFRhcmdldDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi9cblxuXG4gICAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkRmlsbEdhcFNlbGVjdG9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxfbG9ja19hZGRGaWxsR2FwU2VsZWN0b3I7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovXG5cblxuICAgICAgICAgIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlbW92ZUZpbGxHYXBTZWxlY3RvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqL1xuXG5cbiAgICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZWZpbGxHYXBzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZWZpbGxHYXBzO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuICAgICAgICAgICAgICB2YXIgb3duS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb3duS2V5cyA9IG93bktleXMuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBzeW0pLmVudW1lcmFibGU7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFMgPSBbJ3BhZGRpbmcnLCAnbWFyZ2luJywgJ3dpZHRoJywgJ21heC13aWR0aCcsICdub25lJ107XG4gICAgICAgICAgdmFyIFRPVUNIX0RJUkVDVElPTl9ERVRFQ1RfT0ZGU0VUID0gMztcbiAgICAgICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgICAgICBzY3JvbGw6IHRydWUsXG4gICAgICAgICAgICBxdWV1ZTogMCxcbiAgICAgICAgICAgIHNjcm9sbGFibGVTZWxlY3RvcnM6IFsnW2RhdGEtc2Nyb2xsLWxvY2stc2Nyb2xsYWJsZV0nXSxcbiAgICAgICAgICAgIGxvY2thYmxlU2VsZWN0b3JzOiBbJ2JvZHknLCAnW2RhdGEtc2Nyb2xsLWxvY2stbG9ja2FibGVdJ10sXG4gICAgICAgICAgICBmaWxsR2FwU2VsZWN0b3JzOiBbJ2JvZHknLCAnW2RhdGEtc2Nyb2xsLWxvY2stZmlsbC1nYXBdJywgJ1tkYXRhLXNjcm9sbC1sb2NrLWxvY2thYmxlXSddLFxuICAgICAgICAgICAgZmlsbEdhcE1ldGhvZDogRklMTF9HQVBfQVZBSUxBQkxFX01FVEhPRFNbMF0sXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgc3RhcnRUb3VjaFk6IDAsXG4gICAgICAgICAgICBzdGFydFRvdWNoWDogMFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZGlzYWJsZVBhZ2VTY3JvbGwgPSBmdW5jdGlvbiBkaXNhYmxlUGFnZVNjcm9sbCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5xdWV1ZSA8PSAwKSB7XG4gICAgICAgICAgICAgIHN0YXRlLnNjcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvdygpO1xuICAgICAgICAgICAgICBmaWxsR2FwcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY3JvbGxfbG9ja19hZGRTY3JvbGxhYmxlVGFyZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICBzdGF0ZS5xdWV1ZSsrO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZW5hYmxlUGFnZVNjcm9sbCA9IGZ1bmN0aW9uIGVuYWJsZVBhZ2VTY3JvbGwodGFyZ2V0KSB7XG4gICAgICAgICAgICBzdGF0ZS5xdWV1ZSA+IDAgJiYgc3RhdGUucXVldWUtLTtcblxuICAgICAgICAgICAgaWYgKHN0YXRlLnF1ZXVlIDw9IDApIHtcbiAgICAgICAgICAgICAgc3RhdGUuc2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3coKTtcbiAgICAgICAgICAgICAgdW5maWxsR2FwcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0KHRhcmdldCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBnZXRTY3JvbGxTdGF0ZSA9IGZ1bmN0aW9uIGdldFNjcm9sbFN0YXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnNjcm9sbDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIGNsZWFyUXVldWVTY3JvbGxMb2NrcyA9IGZ1bmN0aW9uIGNsZWFyUXVldWVTY3JvbGxMb2NrcygpIHtcbiAgICAgICAgICAgIHN0YXRlLnF1ZXVlID0gMDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoJHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIG9ubHlFeGlzdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIHZhciBjdXJyZW50T3ZlcmZsb3dZUHJvcGVydHkgPSAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93WTtcblxuICAgICAgICAgICAgICBpZiAob25seUV4aXN0cykge1xuICAgICAgICAgICAgICAgIGlmICghZ2V0U2Nyb2xsU3RhdGUoKSkge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zYXZlZC1vdmVyZmxvdy15LXByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgd2lkdGggPSBzY3JvbGxfbG9ja19nZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGgoJHRhcmdldCk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3dZID0gY3VycmVudE92ZXJmbG93WVByb3BlcnR5O1xuICAgICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2dldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uIGdldEN1cnJlbnRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgIGlmICgkdGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvY3VtZW50V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IHdpbmRvd1dpZHRoIC0gZG9jdW1lbnRXaWR0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFdpZHRoO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBib3JkZXJMZWZ0V2lkdGhDdXJyZW50UHJvcGVydHkgPSAkdGFyZ2V0LnN0eWxlLmJvcmRlckxlZnRXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgYm9yZGVyUmlnaHRXaWR0aEN1cnJlbnRQcm9wZXJ0eSA9ICR0YXJnZXQuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aDtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLmJvcmRlckxlZnRXaWR0aCA9ICcwcHgnO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9ICcwcHgnO1xuXG4gICAgICAgICAgICAgICAgdmFyIF9jdXJyZW50V2lkdGggPSAkdGFyZ2V0Lm9mZnNldFdpZHRoIC0gJHRhcmdldC5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gYm9yZGVyTGVmdFdpZHRoQ3VycmVudFByb3BlcnR5O1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IGJvcmRlclJpZ2h0V2lkdGhDdXJyZW50UHJvcGVydHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jdXJyZW50V2lkdGg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZ2V0UGFnZVNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24gZ2V0UGFnZVNjcm9sbEJhcldpZHRoKCkge1xuICAgICAgICAgICAgdmFyIG9ubHlFeGlzdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoKGRvY3VtZW50LmJvZHksIG9ubHlFeGlzdHMpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZ2V0Q3VycmVudFBhZ2VTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uIGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsX2xvY2tfZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVRhcmdldCA9IGZ1bmN0aW9uIGFkZFNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXRzID0gYXJndW1lbnRBc0FycmF5KHRhcmdldCk7XG4gICAgICAgICAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uICgkdGFyZ2V0cykge1xuICAgICAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1zY3JvbGxhYmxlJywgJycpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlVGFyZ2V0ID0gZnVuY3Rpb24gcmVtb3ZlU2Nyb2xsYWJsZVRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNjcm9sbGFibGUnKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93RXJyb3IoXCJcXFwiXCIuY29uY2F0KCR0YXJnZXQsIFwiXFxcIiBpcyBub3QgYSBFbGVtZW50LlwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVNlbGVjdG9yID0gZnVuY3Rpb24gYWRkU2Nyb2xsYWJsZVNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IGFyZ3VtZW50QXNBcnJheShzZWxlY3Rvcik7XG4gICAgICAgICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuc2Nyb2xsYWJsZVNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19yZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3IgPSBmdW5jdGlvbiByZW1vdmVTY3JvbGxhYmxlU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zY3JvbGxhYmxlU2VsZWN0b3JzID0gc3RhdGUuc2Nyb2xsYWJsZVNlbGVjdG9ycy5maWx0ZXIoZnVuY3Rpb24gKHNTZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHNTZWxlY3RvciAhPT0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVUYXJnZXQgPSBmdW5jdGlvbiBhZGRMb2NrYWJsZVRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldHMgPSBhcmd1bWVudEFzQXJyYXkodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKCR0YXJnZXRzKSB7XG4gICAgICAgICAgICAgICAgZWFjaE5vZGUoJHRhcmdldHMsIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2thYmxlJywgJycpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQoJHRhcmdldCwgXCJcXFwiIGlzIG5vdCBhIEVsZW1lbnQuXCIpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKCFnZXRTY3JvbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3coKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkTG9ja2FibGVTZWxlY3RvciA9IGZ1bmN0aW9uIGFkZExvY2thYmxlU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gYXJndW1lbnRBc0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLm1hcChmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5sb2NrYWJsZVNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKCFnZXRTY3JvbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3coKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19zZXRGaWxsR2FwTWV0aG9kID0gZnVuY3Rpb24gc2V0RmlsbEdhcE1ldGhvZChtZXRob2QpIHtcbiAgICAgICAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgICAgICAgaWYgKEZJTExfR0FQX0FWQUlMQUJMRV9NRVRIT0RTLmluZGV4T2YobWV0aG9kKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5maWxsR2FwTWV0aG9kID0gbWV0aG9kO1xuICAgICAgICAgICAgICAgIHJlZmlsbEdhcHMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWV0aG9kcyA9IEZJTExfR0FQX0FWQUlMQUJMRV9NRVRIT0RTLmpvaW4oJywgJyk7XG4gICAgICAgICAgICAgICAgdGhyb3dFcnJvcihcIlxcXCJcIi5jb25jYXQobWV0aG9kLCBcIlxcXCIgbWV0aG9kIGlzIG5vdCBhdmFpbGFibGUhXFxuQXZhaWxhYmxlIGZpbGwgZ2FwIG1ldGhvZHM6IFwiKS5jb25jYXQobWV0aG9kcywgXCIuXCIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFRhcmdldCA9IGZ1bmN0aW9uIGFkZEZpbGxHYXBUYXJnZXQodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXRzID0gYXJndW1lbnRBc0FycmF5KHRhcmdldCk7XG4gICAgICAgICAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uICgkdGFyZ2V0cykge1xuICAgICAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsLWdhcCcsICcnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2ZpbGxHYXBUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93RXJyb3IoXCJcXFwiXCIuY29uY2F0KCR0YXJnZXQsIFwiXFxcIiBpcyBub3QgYSBFbGVtZW50LlwiKSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFRhcmdldCA9IGZ1bmN0aW9uIHJlbW92ZUZpbGxHYXBUYXJnZXQodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXRzID0gYXJndW1lbnRBc0FycmF5KHRhcmdldCk7XG4gICAgICAgICAgICAgIHRhcmdldHMubWFwKGZ1bmN0aW9uICgkdGFyZ2V0cykge1xuICAgICAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1maWxsLWdhcCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfdW5maWxsR2FwVGFyZ2V0KCR0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKFwiXFxcIlwiLmNvbmNhdCgkdGFyZ2V0LCBcIlxcXCIgaXMgbm90IGEgRWxlbWVudC5cIikpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBTZWxlY3RvciA9IGZ1bmN0aW9uIGFkZEZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBhcmd1bWVudEFzQXJyYXkoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBzZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5maWxsR2FwU2VsZWN0b3JzLmluZGV4T2Yoc2VsZWN0b3IpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfcmVtb3ZlRmlsbEdhcFNlbGVjdG9yID0gZnVuY3Rpb24gcmVtb3ZlRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IGFyZ3VtZW50QXNBcnJheShzZWxlY3Rvcik7XG4gICAgICAgICAgICAgIHNlbGVjdG9ycy5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZmlsbEdhcFNlbGVjdG9ycyA9IHN0YXRlLmZpbGxHYXBTZWxlY3RvcnMuZmlsdGVyKGZ1bmN0aW9uIChmU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmU2VsZWN0b3IgIT09IHNlbGVjdG9yO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgIHNjcm9sbF9sb2NrX3VuZmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgcmVmaWxsR2FwcyA9IGZ1bmN0aW9uIHJlZmlsbEdhcHMoKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLnNjcm9sbCkge1xuICAgICAgICAgICAgICBmaWxsR2FwcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3cgPSBmdW5jdGlvbiBoaWRlTG9ja2FibGVPdmVyZmxvdygpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IGFycmF5QXNTZWxlY3RvcihzdGF0ZS5sb2NrYWJsZVNlbGVjdG9ycyk7XG4gICAgICAgICAgICBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93ID0gZnVuY3Rpb24gc2hvd0xvY2thYmxlT3ZlcmZsb3coKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBhcnJheUFzU2VsZWN0b3Ioc3RhdGUubG9ja2FibGVTZWxlY3RvcnMpO1xuICAgICAgICAgICAgc2Nyb2xsX2xvY2tfc2hvd0xvY2thYmxlT3ZlcmZsb3dTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19oaWRlTG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yID0gZnVuY3Rpb24gaGlkZUxvY2thYmxlT3ZlcmZsb3dTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICR0YXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3dUYXJnZXQoJHRhcmdldCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX3Nob3dMb2NrYWJsZU92ZXJmbG93U2VsZWN0b3IgPSBmdW5jdGlvbiBzaG93TG9ja2FibGVPdmVyZmxvd1NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvd1RhcmdldCgkdGFyZ2V0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfaGlkZUxvY2thYmxlT3ZlcmZsb3dUYXJnZXQgPSBmdW5jdGlvbiBoaWRlTG9ja2FibGVPdmVyZmxvd1RhcmdldCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50KCR0YXJnZXQpICYmICR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2tlZCcpICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtb3ZlcmZsb3cteS1wcm9wZXJ0eScsIGNvbXB1dGVkU3R5bGUub3ZlcmZsb3dZKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXByb3BlcnR5JywgJHRhcmdldC5zdHlsZS5vdmVyZmxvdyk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNhdmVkLWlubGluZS1vdmVyZmxvdy15LXByb3BlcnR5JywgJHRhcmdldC5zdHlsZS5vdmVyZmxvd1kpO1xuICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2tlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19zaG93TG9ja2FibGVPdmVyZmxvd1RhcmdldCA9IGZ1bmN0aW9uIHNob3dMb2NrYWJsZU92ZXJmbG93VGFyZ2V0KCR0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkgJiYgJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stbG9ja2VkJykgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUub3ZlcmZsb3dZID0gJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXktcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtb3ZlcmZsb3ctcHJvcGVydHknKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stc2F2ZWQtaW5saW5lLW92ZXJmbG93LXByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLXNhdmVkLWlubGluZS1vdmVyZmxvdy15LXByb3BlcnR5Jyk7XG4gICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWxvY2tlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgZmlsbEdhcHMgPSBmdW5jdGlvbiBmaWxsR2FwcygpIHtcbiAgICAgICAgICAgIHN0YXRlLmZpbGxHYXBTZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19maWxsR2FwU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciB1bmZpbGxHYXBzID0gZnVuY3Rpb24gdW5maWxsR2FwcygpIHtcbiAgICAgICAgICAgIHN0YXRlLmZpbGxHYXBTZWxlY3RvcnMubWFwKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja191bmZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX2ZpbGxHYXBTZWxlY3RvciA9IGZ1bmN0aW9uIGZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICR0YXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICB2YXIgaXNMb2NrYWJsZSA9IHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzLmluZGV4T2Yoc2VsZWN0b3IpICE9PSAtMTtcbiAgICAgICAgICAgIGVhY2hOb2RlKCR0YXJnZXRzLCBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAgICAgICAgICAgICBzY3JvbGxfbG9ja19maWxsR2FwVGFyZ2V0KCR0YXJnZXQsIGlzTG9ja2FibGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja19maWxsR2FwVGFyZ2V0ID0gZnVuY3Rpb24gZmlsbEdhcFRhcmdldCgkdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgaXNMb2NrYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnQoJHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgdmFyIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1sb2NrYWJsZScpID09PSAnJyB8fCBpc0xvY2thYmxlKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxfbG9ja19nZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkdGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgJGxvY2thYmxlUGFyZW50ID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoJHRhcmdldCwgYXJyYXlBc1NlbGVjdG9yKHN0YXRlLmxvY2thYmxlU2VsZWN0b3JzKSk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGggPSBzY3JvbGxfbG9ja19nZXRUYXJnZXRTY3JvbGxCYXJXaWR0aCgkbG9ja2FibGVQYXJlbnQsIHRydWUpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGxlZC1nYXAnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfdW5maWxsR2FwVGFyZ2V0KCR0YXJnZXQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSgkdGFyZ2V0KTtcbiAgICAgICAgICAgICAgJHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICR0YXJnZXQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWN1cnJlbnQtZmlsbC1nYXAtbWV0aG9kJywgc3RhdGUuZmlsbEdhcE1ldGhvZCk7XG5cbiAgICAgICAgICAgICAgaWYgKHN0YXRlLmZpbGxHYXBNZXRob2QgPT09ICdtYXJnaW4nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNYXJnaW4gPSBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUubWFyZ2luUmlnaHQgPSBcIlwiLmNvbmNhdChjdXJyZW50TWFyZ2luICsgc2Nyb2xsQmFyV2lkdGgsIFwicHhcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ3dpZHRoJykge1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUud2lkdGggPSBcImNhbGMoMTAwJSAtIFwiLmNvbmNhdChzY3JvbGxCYXJXaWR0aCwgXCJweClcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZmlsbEdhcE1ldGhvZCA9PT0gJ21heC13aWR0aCcpIHtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LnN0eWxlLm1heFdpZHRoID0gXCJjYWxjKDEwMCUgLSBcIi5jb25jYXQoc2Nyb2xsQmFyV2lkdGgsIFwicHgpXCIpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmZpbGxHYXBNZXRob2QgPT09ICdwYWRkaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGFkZGluZyA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZS5wYWRkaW5nUmlnaHQpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCJcIi5jb25jYXQoY3VycmVudFBhZGRpbmcgKyBzY3JvbGxCYXJXaWR0aCwgXCJweFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsX2xvY2tfdW5maWxsR2FwU2VsZWN0b3IgPSBmdW5jdGlvbiB1bmZpbGxHYXBTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgICAgICAgdmFyICR0YXJnZXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICBlYWNoTm9kZSgkdGFyZ2V0cywgZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfdW5maWxsR2FwVGFyZ2V0KCR0YXJnZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBzY3JvbGxfbG9ja191bmZpbGxHYXBUYXJnZXQgPSBmdW5jdGlvbiB1bmZpbGxHYXBUYXJnZXQoJHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKGlzRWxlbWVudCgkdGFyZ2V0KSkge1xuICAgICAgICAgICAgICBpZiAoJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWxvY2stZmlsbGVkLWdhcCcpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEZpbGxHYXBNZXRob2QgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1jdXJyZW50LWZpbGwtZ2FwLW1ldGhvZCcpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXNjcm9sbC1sb2NrLWZpbGxlZC1nYXAnKTtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtbG9jay1jdXJyZW50LWZpbGwtZ2FwLW1ldGhvZCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWxsR2FwTWV0aG9kID09PSAnbWFyZ2luJykge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsbEdhcE1ldGhvZCA9PT0gJ3dpZHRoJykge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS53aWR0aCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsbEdhcE1ldGhvZCA9PT0gJ21heC13aWR0aCcpIHtcbiAgICAgICAgICAgICAgICAgICR0YXJnZXQuc3R5bGUubWF4V2lkdGggPSBcIlwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGxHYXBNZXRob2QgPT09ICdwYWRkaW5nJykge1xuICAgICAgICAgICAgICAgICAgJHRhcmdldC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb25SZXNpemUgPSBmdW5jdGlvbiBvblJlc2l6ZShlKSB7XG4gICAgICAgICAgICByZWZpbGxHYXBzKCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblRvdWNoU3RhcnQgPSBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgc3RhdGUuc3RhcnRUb3VjaFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgICAgICAgc3RhdGUuc3RhcnRUb3VjaFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrX29uVG91Y2hNb3ZlID0gZnVuY3Rpb24gb25Ub3VjaE1vdmUoZSkge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5zY3JvbGwpIHtcbiAgICAgICAgICAgICAgdmFyIHN0YXJ0VG91Y2hZID0gc3RhdGUuc3RhcnRUb3VjaFksXG4gICAgICAgICAgICAgICAgICBzdGFydFRvdWNoWCA9IHN0YXRlLnN0YXJ0VG91Y2hYO1xuICAgICAgICAgICAgICB2YXIgY3VycmVudENsaWVudFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDbGllbnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XG5cbiAgICAgICAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gYXJyYXlBc1NlbGVjdG9yKHN0YXRlLnNjcm9sbGFibGVTZWxlY3RvcnMpO1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgICB1cDogc3RhcnRUb3VjaFkgPCBjdXJyZW50Q2xpZW50WSxcbiAgICAgICAgICAgICAgICAgIGRvd246IHN0YXJ0VG91Y2hZID4gY3VycmVudENsaWVudFksXG4gICAgICAgICAgICAgICAgICBsZWZ0OiBzdGFydFRvdWNoWCA8IGN1cnJlbnRDbGllbnRYLFxuICAgICAgICAgICAgICAgICAgcmlnaHQ6IHN0YXJ0VG91Y2hYID4gY3VycmVudENsaWVudFhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25XaXRoT2Zmc2V0ID0ge1xuICAgICAgICAgICAgICAgICAgdXA6IHN0YXJ0VG91Y2hZICsgVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPCBjdXJyZW50Q2xpZW50WSxcbiAgICAgICAgICAgICAgICAgIGRvd246IHN0YXJ0VG91Y2hZIC0gVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPiBjdXJyZW50Q2xpZW50WSxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IHN0YXJ0VG91Y2hYICsgVE9VQ0hfRElSRUNUSU9OX0RFVEVDVF9PRkZTRVQgPCBjdXJyZW50Q2xpZW50WCxcbiAgICAgICAgICAgICAgICAgIHJpZ2h0OiBzdGFydFRvdWNoWCAtIFRPVUNIX0RJUkVDVElPTl9ERVRFQ1RfT0ZGU0VUID4gY3VycmVudENsaWVudFhcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGZ1bmN0aW9uIGhhbmRsZSgkZWwpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBza2lwID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgaWYgKCRlbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50U2Nyb2xsYWJsZUVsID0gZmluZFBhcmVudEJ5U2VsZWN0b3IoJGVsLCBzZWxlY3RvciwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50SXNJbnB1dFJhbmdlKCRlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcCB8fCBlbGVtZW50SXNTY3JvbGxhYmxlRmllbGQoJGVsKSAmJiBmaW5kUGFyZW50QnlTZWxlY3RvcigkZWwsIHNlbGVjdG9yKSB8fCBlbGVtZW50SGFzU2VsZWN0b3IoJGVsLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldmVudCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCgkZWwpICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25FbmQoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbi51cCAmJiBlbGVtZW50U2Nyb2xsVG9wT25TdGFydCgkZWwpIHx8IGRpcmVjdGlvbi5kb3duICYmIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFNjcm9sbFRvcE9uU3RhcnQoJGVsKSAmJiBlbGVtZW50U2Nyb2xsVG9wT25FbmQoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbi5sZWZ0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25TdGFydCgkZWwpIHx8IGRpcmVjdGlvbi5yaWdodCAmJiBlbGVtZW50U2Nyb2xsTGVmdE9uRW5kKCRlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb25XaXRoT2Zmc2V0LnVwICYmIGVsZW1lbnRTY3JvbGxUb3BPblN0YXJ0KCRlbCkgfHwgZGlyZWN0aW9uV2l0aE9mZnNldC5kb3duICYmIGVsZW1lbnRTY3JvbGxUb3BPbkVuZCgkZWwpIHx8IGRpcmVjdGlvbldpdGhPZmZzZXQubGVmdCAmJiBlbGVtZW50U2Nyb2xsTGVmdE9uU3RhcnQoJGVsKSB8fCBkaXJlY3Rpb25XaXRoT2Zmc2V0LnJpZ2h0ICYmIGVsZW1lbnRTY3JvbGxMZWZ0T25FbmQoJGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRTY3JvbGxhYmxlRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlKHBhcmVudFNjcm9sbGFibGVFbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZShwYXJlbnRTY3JvbGxhYmxlRWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGhhbmRsZShlLnRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9uVG91Y2hFbmQgPSBmdW5jdGlvbiBvblRvdWNoRW5kKGUpIHtcbiAgICAgICAgICAgIGlmICghc3RhdGUuc2Nyb2xsKSB7XG4gICAgICAgICAgICAgIHN0YXRlLnN0YXJ0VG91Y2hZID0gMDtcbiAgICAgICAgICAgICAgc3RhdGUuc3RhcnRUb3VjaFggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgc2Nyb2xsX2xvY2tfb25Ub3VjaE1vdmUsIHtcbiAgICAgICAgICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoRW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZGVwcmVjYXRlZE1ldGhvZHMgPSB7XG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKHRhcmdldCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcImhpZGVcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJkaXNhYmxlUGFnZVNjcm9sbFwiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNkaXNhYmxlcGFnZXNjcm9sbHNjcm9sbGFibGV0YXJnZXQnKTtcbiAgICAgICAgICAgICAgZGlzYWJsZVBhZ2VTY3JvbGwodGFyZ2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiBzaG93KHRhcmdldCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcInNob3dcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJlbmFibGVQYWdlU2Nyb2xsXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2VuYWJsZXBhZ2VzY3JvbGxzY3JvbGxhYmxldGFyZ2V0Jyk7XG4gICAgICAgICAgICAgIGVuYWJsZVBhZ2VTY3JvbGwodGFyZ2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZSh0YXJnZXQpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJ0b2dnbGVcIiBpcyBkZXByZWNhdGVkISBEbyBub3QgdXNlIGl0LicpO1xuXG4gICAgICAgICAgICAgIGlmIChnZXRTY3JvbGxTdGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZVBhZ2VTY3JvbGwoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmFibGVQYWdlU2Nyb2xsKHRhcmdldCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRTdGF0ZTogZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiZ2V0U3RhdGVcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJnZXRTY3JvbGxTdGF0ZVwiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNnZXRzY3JvbGxzdGF0ZScpO1xuICAgICAgICAgICAgICByZXR1cm4gZ2V0U2Nyb2xsU3RhdGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRXaWR0aDogZnVuY3Rpb24gZ2V0V2lkdGgoKSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wiZ2V0V2lkdGhcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJnZXRQYWdlU2Nyb2xsQmFyV2lkdGhcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjZ2V0cGFnZXNjcm9sbGJhcndpZHRoJyk7XG4gICAgICAgICAgICAgIHJldHVybiBnZXRQYWdlU2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRDdXJyZW50V2lkdGg6IGZ1bmN0aW9uIGdldEN1cnJlbnRXaWR0aCgpIHtcbiAgICAgICAgICAgICAgdGhyb3dFcnJvcignXCJnZXRDdXJyZW50V2lkdGhcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJnZXRDdXJyZW50UGFnZVNjcm9sbEJhcldpZHRoXCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2dldGN1cnJlbnRwYWdlc2Nyb2xsYmFyd2lkdGgnKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGgoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRTY3JvbGxhYmxlVGFyZ2V0czogZnVuY3Rpb24gc2V0U2Nyb2xsYWJsZVRhcmdldHModGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wic2V0U2Nyb2xsYWJsZVRhcmdldHNcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJhZGRTY3JvbGxhYmxlVGFyZ2V0XCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2FkZHNjcm9sbGFibGV0YXJnZXRzY3JvbGxhYmxldGFyZ2V0Jyk7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRGaWxsR2FwU2VsZWN0b3JzOiBmdW5jdGlvbiBzZXRGaWxsR2FwU2VsZWN0b3JzKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wic2V0RmlsbEdhcFNlbGVjdG9yc1wiIGlzIGRlcHJlY2F0ZWQhIFVzZSBcImFkZEZpbGxHYXBTZWxlY3RvclwiIGluc3RlYWQuIFxcbiBodHRwczovL2dpdGh1Yi5jb20vRkwzTktFWS9zY3JvbGwtbG9jayNhZGRmaWxsZ2Fwc2VsZWN0b3JmaWxsZ2Fwc2VsZWN0b3InKTtcbiAgICAgICAgICAgICAgc2Nyb2xsX2xvY2tfYWRkRmlsbEdhcFNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRGaWxsR2FwVGFyZ2V0czogZnVuY3Rpb24gc2V0RmlsbEdhcFRhcmdldHModGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHRocm93RXJyb3IoJ1wic2V0RmlsbEdhcFRhcmdldHNcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJhZGRGaWxsR2FwVGFyZ2V0XCIgaW5zdGVhZC4gXFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9GTDNOS0VZL3Njcm9sbC1sb2NrI2FkZGZpbGxnYXB0YXJnZXRmaWxsZ2FwdGFyZ2V0Jyk7XG4gICAgICAgICAgICAgIHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhclF1ZXVlOiBmdW5jdGlvbiBjbGVhclF1ZXVlKCkge1xuICAgICAgICAgICAgICB0aHJvd0Vycm9yKCdcImNsZWFyUXVldWVcIiBpcyBkZXByZWNhdGVkISBVc2UgXCJjbGVhclF1ZXVlU2Nyb2xsTG9ja3NcIiBpbnN0ZWFkLiBcXG4gaHR0cHM6Ly9naXRodWIuY29tL0ZMM05LRVkvc2Nyb2xsLWxvY2sjY2xlYXJxdWV1ZXNjcm9sbGxvY2tzJyk7XG4gICAgICAgICAgICAgIGNsZWFyUXVldWVTY3JvbGxMb2NrcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgc2Nyb2xsTG9jayA9IF9vYmplY3RTcHJlYWQoe1xuICAgICAgICAgICAgZGlzYWJsZVBhZ2VTY3JvbGw6IGRpc2FibGVQYWdlU2Nyb2xsLFxuICAgICAgICAgICAgZW5hYmxlUGFnZVNjcm9sbDogZW5hYmxlUGFnZVNjcm9sbCxcbiAgICAgICAgICAgIGdldFNjcm9sbFN0YXRlOiBnZXRTY3JvbGxTdGF0ZSxcbiAgICAgICAgICAgIGNsZWFyUXVldWVTY3JvbGxMb2NrczogY2xlYXJRdWV1ZVNjcm9sbExvY2tzLFxuICAgICAgICAgICAgZ2V0VGFyZ2V0U2Nyb2xsQmFyV2lkdGg6IHNjcm9sbF9sb2NrX2dldFRhcmdldFNjcm9sbEJhcldpZHRoLFxuICAgICAgICAgICAgZ2V0Q3VycmVudFRhcmdldFNjcm9sbEJhcldpZHRoOiBzY3JvbGxfbG9ja19nZXRDdXJyZW50VGFyZ2V0U2Nyb2xsQmFyV2lkdGgsXG4gICAgICAgICAgICBnZXRQYWdlU2Nyb2xsQmFyV2lkdGg6IGdldFBhZ2VTY3JvbGxCYXJXaWR0aCxcbiAgICAgICAgICAgIGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGg6IGdldEN1cnJlbnRQYWdlU2Nyb2xsQmFyV2lkdGgsXG4gICAgICAgICAgICBhZGRTY3JvbGxhYmxlU2VsZWN0b3I6IHNjcm9sbF9sb2NrX2FkZFNjcm9sbGFibGVTZWxlY3RvcixcbiAgICAgICAgICAgIHJlbW92ZVNjcm9sbGFibGVTZWxlY3Rvcjogc2Nyb2xsX2xvY2tfcmVtb3ZlU2Nyb2xsYWJsZVNlbGVjdG9yLFxuICAgICAgICAgICAgYWRkU2Nyb2xsYWJsZVRhcmdldDogc2Nyb2xsX2xvY2tfYWRkU2Nyb2xsYWJsZVRhcmdldCxcbiAgICAgICAgICAgIHJlbW92ZVNjcm9sbGFibGVUYXJnZXQ6IHNjcm9sbF9sb2NrX3JlbW92ZVNjcm9sbGFibGVUYXJnZXQsXG4gICAgICAgICAgICBhZGRMb2NrYWJsZVNlbGVjdG9yOiBzY3JvbGxfbG9ja19hZGRMb2NrYWJsZVNlbGVjdG9yLFxuICAgICAgICAgICAgYWRkTG9ja2FibGVUYXJnZXQ6IHNjcm9sbF9sb2NrX2FkZExvY2thYmxlVGFyZ2V0LFxuICAgICAgICAgICAgYWRkRmlsbEdhcFNlbGVjdG9yOiBzY3JvbGxfbG9ja19hZGRGaWxsR2FwU2VsZWN0b3IsXG4gICAgICAgICAgICByZW1vdmVGaWxsR2FwU2VsZWN0b3I6IHNjcm9sbF9sb2NrX3JlbW92ZUZpbGxHYXBTZWxlY3RvcixcbiAgICAgICAgICAgIGFkZEZpbGxHYXBUYXJnZXQ6IHNjcm9sbF9sb2NrX2FkZEZpbGxHYXBUYXJnZXQsXG4gICAgICAgICAgICByZW1vdmVGaWxsR2FwVGFyZ2V0OiBzY3JvbGxfbG9ja19yZW1vdmVGaWxsR2FwVGFyZ2V0LFxuICAgICAgICAgICAgc2V0RmlsbEdhcE1ldGhvZDogc2Nyb2xsX2xvY2tfc2V0RmlsbEdhcE1ldGhvZCxcbiAgICAgICAgICAgIHJlZmlsbEdhcHM6IHJlZmlsbEdhcHMsXG4gICAgICAgICAgICBfc3RhdGU6IHN0YXRlXG4gICAgICAgICAgfSwgZGVwcmVjYXRlZE1ldGhvZHMpO1xuICAgICAgICAgIC8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi9cblxuXG4gICAgICAgICAgdmFyIHNjcm9sbF9sb2NrID0gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSBzY3JvbGxMb2NrO1xuICAgICAgICAgIC8qKiovXG4gICAgICAgIH1cbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgXSlbXCJkZWZhdWx0XCJdXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbiAgdmFyIHNjcm9sbExvY2skMSA9IHVud3JhcEV4cG9ydHMoc2Nyb2xsTG9jayk7XG5cbiAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfVxuXG4gIHZhciB0ZXN0QXBpID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0ZXN0QXBpKGNvbnRhaW5lcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIHRlc3RBcGkpO1xuXG4gICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgIHRoaXMudHJpZ2dlckJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRlc3QtYXBpXScpO1xuICAgICAgdGhpcy5yZXF1ZXN0UmVzdWx0ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtdGVzdC1yZXN1bHRdJyk7XG4gICAgICB0aGlzLnJlcXVlc3RVcmwgPSB0aGlzLnRyaWdnZXJCdG4uZGF0YXNldC50ZXN0QXBpO1xuICAgICAgdGhpcy50cmlnZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBfdGhpcy5yZXF1ZXN0UmVzcG9uc2UoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyh0ZXN0QXBpLCBbe1xuICAgICAga2V5OiBcInJlcXVlc3RSZXNwb25zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RSZXNwb25zZSgpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgZmV0Y2godGhpcy5yZXF1ZXN0VXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgX3RoaXMyLnJlcXVlc3RSZXN1bHQuaW5uZXJIVE1MID0gZGF0YS50aXRsZSArIGRhdGEubWVzc2FnZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiB0ZXN0QXBpO1xuICB9KCk7XG5cbiAgZnVuY3Rpb24gZmlyZWJhc2VMb2dpYygpIHtcbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgb3BlbkNsYXNzOiAnaXMtb3BlbidcbiAgICB9O1xuICAgIHZhciBpZCA9IGxvY2F0aW9uLnNlYXJjaC5zcGxpdCgnPz0nKVsxXTtcbiAgICB2YXIgaW52aXRhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1pbnZpdGF0aW9uJyk7XG4gICAgdmFyIGNvbmZpcm1hdGlvbiA9IGludml0YXRpb24ucXVlcnlTZWxlY3RvcignW2RhdGEtaW52aXRhdGlvbi1jb25maXJtYXRpb25dJyk7XG4gICAgdmFyIGJ1dHRvbnMgPSBjb25maXJtYXRpb24ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYnRuLWdvaW5nXScpO1xuICAgIHZhciBmb3JtID0gaW52aXRhdGlvbi5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pbnZpdGF0aW9uLWZvcm1dJyk7XG4gICAgYnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidG4pIHtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGJ0bi5kYXRhc2V0LmJ0bkdvaW5nID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhpZCkudXBkYXRlKHtcbiAgICAgICAgICAgIENvbWluZzogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbmZpcm1hdGlvbi5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5vcGVuQ2xhc3MpO1xuICAgICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZChjb25maWcub3BlbkNsYXNzKTtcbiAgICAgICAgfSBlbHNlIGlmIChidG4uZGF0YXNldC5idG5Hb2luZyA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKGlkKS51cGRhdGUoe1xuICAgICAgICAgICAgQ29taW5nOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbmZpcm1hdGlvbi5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5vcGVuQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgaGVhZGVyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhlYWRlci1pbnZpdGF0aW9uLXRleHRdJyk7XG4gICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChxdWVyeVNuYXBzaG90KSB7XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xuICAgICAgICBpZiAoZG9jLmlkID09PSBpZCkge1xuICAgICAgICAgIHZhciBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICBoZWFkZXJUZXh0LmlubmVyVGV4dCA9IFwiXCIuY29uY2F0KGRhdGEuTmFtZSwgXCIgXCIpLmNvbmNhdChkYXRhLkxhc3ROYW1lLCBcIiBcXHUwNDMyXFx1MDQ0QiBcXHUwNDNGXFx1MDQ0MFxcdTA0MzhcXHUwNDMzXFx1MDQzQlxcdTA0MzBcXHUwNDQ4XFx1MDQzNVxcdTA0M0RcXHUwNDRCIFxcdTA0M0RcXHUwNDMwIFxcdTA0NDFcXHUwNDMyXFx1MDQzMFxcdTA0MzRcXHUwNDRDXFx1MDQzMVxcdTA0NDNcIik7XG4gICAgICAgICAgIWRhdGEuQ29taW5nID8gaW52aXRhdGlvbi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5vcGVuQ2xhc3MpIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2MoaWQpLnVwZGF0ZSh7XG4gICAgICAgIFBlcnNvbnM6IGZvcm0ucGVyc29ucy52YWx1ZVxuICAgICAgfSk7XG4gICAgICBpbnZpdGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLm9wZW5DbGFzcyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0aWFsaXplQ2xvY2soZW5kdGltZSkge1xuICAgIHZhciBjbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jb3VudGRvd11cIik7XG4gICAgdmFyIGRheXNTcGFuID0gY2xvY2sucXVlcnlTZWxlY3RvcihcIltkYXRhLWNvdW50ZG93LWRheXNdXCIpO1xuICAgIHZhciBob3Vyc1NwYW4gPSBjbG9jay5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY291bnRkb3ctaG91cnNdXCIpO1xuICAgIHZhciBtaW51dGVzU3BhbiA9IGNsb2NrLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1jb3VudGRvdy1taW51dGVzXVwiKTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUNsb2NrKCkge1xuICAgICAgdmFyIHRvdGFsID0gZ2V0VGltZVJlbWFpbmluZyhlbmR0aW1lKTtcbiAgICAgIGRheXNTcGFuLmlubmVySFRNTCA9IHRvdGFsLmRheXM7XG4gICAgICBob3Vyc1NwYW4uaW5uZXJIVE1MID0gKCcwJyArIHRvdGFsLmhvdXJzKS5zbGljZSgtMik7XG4gICAgICBtaW51dGVzU3Bhbi5pbm5lckhUTUwgPSAoJzAnICsgdG90YWwubWludXRlcykuc2xpY2UoLTIpO1xuXG4gICAgICBpZiAodG90YWwudG90YWwgPD0gMCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRpbWVJbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlQ2xvY2soKTtcbiAgICB2YXIgdGltZUludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlQ2xvY2ssIDEwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGltZVJlbWFpbmluZyhlbmR0aW1lKSB7XG4gICAgdmFyIHRvdGFsID0gRGF0ZS5wYXJzZShlbmR0aW1lKSAtIERhdGUucGFyc2UobmV3IERhdGUoKSk7XG4gICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsIC8gMTAwMCAvIDYwICUgNjApO1xuICAgIHZhciBob3VycyA9IE1hdGguZmxvb3IodG90YWwgLyAoMTAwMCAqIDYwICogNjApICUgMjQpO1xuICAgIHZhciBkYXlzID0gTWF0aC5mbG9vcih0b3RhbCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICd0b3RhbCc6IHRvdGFsLFxuICAgICAgJ2RheXMnOiBkYXlzLFxuICAgICAgJ2hvdXJzJzogaG91cnMsXG4gICAgICAnbWludXRlcyc6IG1pbnV0ZXNcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaW52aXRhdGlvbihpbnZpdGF0aW9uKSB7XG4gICAgdmFyIHNlbGVjdG9ycyA9IHtcbiAgICAgIGNvbnRyb2w6ICdkYXRhLWJ0bi1nb2luZydcbiAgICB9O1xuICAgIHZhciBtb2RlbCA9IHtcbiAgICAgIGNvbnRyb2w6IGludml0YXRpb24ucXVlcnlTZWxlY3RvcihcIltcIi5jb25jYXQoc2VsZWN0b3JzLmNvbnRyb2wsIFwiXVwiKSlcbiAgICB9O1xuICAgIG1vZGVsLmNvbnRyb2wuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBTY3JvbGxBbmltYXRpb24oaXRlbSkge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIGJsb2NrSUQgPSBpdGVtLmdldEF0dHJpYnV0ZSgnaHJlZicpLnN1YnN0cigxKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJsb2NrSUQpLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICBibG9jazogJ3N0YXJ0J1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBzdmc0ZXZlcnlib2R5KCk7XG4gIHZhciBzZWxlY3RvcnMgPSB7XG4gICAgc2Nyb2xsQW5pbWF0aW9uOiAnLmpzLXNjcm9sbC1hbmltYXRpb24nXG4gIH07XG4gIHdpbmRvdy5hcHAgPSB7XG4gICAgaGVhZGVyOiBudWxsLFxuICAgIHNjcm9sbDoge1xuICAgICAgZGlzYWJsZTogc2Nyb2xsTG9jayQxLmRpc2FibGVQYWdlU2Nyb2xsLFxuICAgICAgZW5hYmxlOiBzY3JvbGxMb2NrJDEuZW5hYmxlUGFnZVNjcm9sbFxuICAgIH0sXG4gICAgc2V0SW5lcnQ6IGZ1bmN0aW9uIHNldEluZXJ0KCkge1xuICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnaW5lcnQnLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVtb3ZlSW5lcnQ6IGZ1bmN0aW9uIHJlbW92ZUluZXJ0KCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdpbmVydCcpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBpbml0TW9kdWxlOiBmdW5jdGlvbiBpbml0TW9kdWxlKE1vZHVsZSwgc2VsZWN0b3IpIHtcbiAgICAgIGlmICghIXNlbGVjdG9yKSB7XG4gICAgICAgIHZhciBibG9ja3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgICAgIGJsb2Nrcy5mb3JFYWNoKGZ1bmN0aW9uIChibG9jaykge1xuICAgICAgICAgIG5ldyBNb2R1bGUoYmxvY2spO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBNb2R1bGUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBhcHAuaW5pdE1vZHVsZSh0ZXN0QXBpLCAnLmpzLXRlc3QtYXBpJyk7XG4gICAgICBhcHAuaW5pdE1vZHVsZShpbnZpdGF0aW9uLCAnLmpzLWludml0YXRpb24nKTtcbiAgICAgIGZpcmViYXNlTG9naWMoKTtcbiAgICAgIHZhciBkZWFkbGluZSA9ICcyMDIxLTA4LTA3JztcbiAgICAgIGluaXRpYWxpemVDbG9jayhkZWFkbGluZSk7XG4gICAgICBhcHAuaW5pdE1vZHVsZShTY3JvbGxBbmltYXRpb24sIHNlbGVjdG9ycy5zY3JvbGxBbmltYXRpb24pO1xuICAgIH1cbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhcHAuaW5pdCk7XG59KTsiXX0=
